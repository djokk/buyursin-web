(function(t){function a(a){for(var s,n,l=a[0],c=a[1],r=a[2],d=0,u=[];d<l.length;d++)n=l[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);m&&m(a);while(u.length)u.shift()();return o.push.apply(o,r||[]),e()}function e(){for(var t,a=0;a<o.length;a++){for(var e=o[a],s=!0,n=1;n<e.length;n++){var l=e[n];0!==i[l]&&(s=!1)}s&&(o.splice(a--,1),t=c(c.s=e[0]))}return t}var s={},n={app:0},i={app:0},o=[];function l(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-2c3de6d6":"d0afe9fd","chunk-2d0b2e8a":"6ca89a16","chunk-45ef61ba":"0a096569","chunk-6c985723":"bb0aa214","chunk-df967538":"bd7c97e9"}[t]+".js"}function c(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.e=function(t){var a=[],e={"chunk-2c3de6d6":1,"chunk-45ef61ba":1,"chunk-6c985723":1,"chunk-df967538":1};n[t]?a.push(n[t]):0!==n[t]&&e[t]&&a.push(n[t]=new Promise((function(a,e){for(var s="css/"+({}[t]||t)+"."+{"chunk-2c3de6d6":"f21750a7","chunk-2d0b2e8a":"31d6cfe0","chunk-45ef61ba":"edd967c2","chunk-6c985723":"1ac18d47","chunk-df967538":"1ac18d47"}[t]+".css",i=c.p+s,o=document.getElementsByTagName("link"),l=0;l<o.length;l++){var r=o[l],d=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(d===s||d===i))return a()}var u=document.getElementsByTagName("style");for(l=0;l<u.length;l++){r=u[l],d=r.getAttribute("data-href");if(d===s||d===i)return a()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=a,m.onerror=function(a){var s=a&&a.target&&a.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete n[t],m.parentNode.removeChild(m),e(o)},m.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){n[t]=0})));var s=i[t];if(0!==s)if(s)a.push(s[2]);else{var o=new Promise((function(a,e){s=i[t]=[a,e]}));a.push(s[2]=o);var r,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=l(t);var u=new Error;r=function(a){d.onerror=d.onload=null,clearTimeout(m);var e=i[t];if(0!==e){if(e){var s=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",u.name="ChunkLoadError",u.type=s,u.request=n,e[1](u)}i[t]=void 0}};var m=setTimeout((function(){r({type:"timeout",target:d})}),12e4);d.onerror=d.onload=r,document.head.appendChild(d)}return Promise.all(a)},c.m=t,c.c=s,c.d=function(t,a,e){c.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,a){if(1&a&&(t=c(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)c.d(e,s,function(a){return t[a]}.bind(null,s));return e},c.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(a,"a",a),a},c.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},c.p="/buyursin-web/",c.oe=function(t){throw console.error(t),t};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=a,r=r.slice();for(var u=0;u<r.length;u++)a(r[u]);var m=d;o.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"09b2":function(t,a,e){"use strict";e("b1a2")},"0ba0":function(t,a,e){},"0f8e":function(t,a,e){},"10cf":function(t,a,e){"use strict";e("9541")},"116f":function(t,a,e){},"13bd":function(t,a,e){},"184a":function(t,a,e){"use strict";e("3aa2")},"1df3":function(t,a,e){"use strict";e("e59d")},"1f4a":function(t,a,e){"use strict";e("e876")},"220a":function(t,a,e){},2223:function(t,a,e){"use strict";e("ad2c")},"2b24":function(t,a,e){"use strict";e("93e0")},"2c4d":function(t,a,e){},3161:function(t,a,e){"use strict";e("d3e6")},"32ac":function(t,a,e){"use strict";e("d5eb")},3499:function(t,a,e){"use strict";e("f80b")},"371f":function(t,a,e){},"37c7":function(t,a,e){},"3aa2":function(t,a,e){},"3b9e":function(t,a,e){"use strict";e("4664")},4664:function(t,a,e){},4678:function(t,a,e){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var a=i(t);return e(a)}function i(t){if(!e.o(s,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="4678"},"47db":function(t,a,e){"use strict";e("d32d")},"4b10":function(t,a,e){"use strict";e("b87f")},"4bea":function(t,a,e){"use strict";e("587f")},"4c0c":function(t,a,e){},"4fc8":function(t,a,e){"use strict";e("68ae")},5339:function(t,a,e){},"53a2":function(t,a,e){"use strict";e("8c76")},5564:function(t,a,e){},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var s=e("2b0e"),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e(t.layout,{tag:"component"},[e("router-view")],1)],1)},i=[],o=(e("d3b7"),e("3ca3"),e("ddb0"),{computed:{layout:function(){var t=this.$route.meta.layout||"Default";return function(){return e("a449")("./".concat(t,".vue"))}}}}),l=o,c=(e("5c0b"),e("9aa7"),e("0c7c")),r=Object(c["a"])(l,n,i,!1,null,null,null),d=r.exports,u=e("8c4f"),m=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-6 col-lg-6 col-md-5 col-sm-5"},[e("div",{staticClass:"left",on:{click:function(a){return t.localReChange()}}},[e("h1",{staticClass:"left__title"},[t._v("buyursin")])])]),e("div",{staticClass:"col-xl-6 col-lg-6 col-md-7 col-sm-7"},[e("div",{staticClass:"right"},[e("form",{staticClass:"right__form form",attrs:{action:"#"},on:{submit:function(a){return a.preventDefault(),t.auth()}}},[e("h4",{staticClass:"form__title mb-1"},[t._v(t._s(t.$t("entrance")))]),e("div",{staticClass:"form__item",class:t.$v.number.$error?"is-invalid":""},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.number,expression:"number"}],attrs:{type:"text"},domProps:{value:t.number},on:{input:function(a){a.target.composing||(t.number=a.target.value)}}}),e("span",{class:""!=t.number?"active-span":""},[t._v(t._s(t.$t("telephone")))])]),e("div",{staticClass:"form__item",class:t.$v.password.$error?"is-invalid":""},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"text"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}}),e("span",{class:""!=t.password?"active-span":""},[t._v(t._s(t.$t("password")))])]),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(t._s(t.$t("btnEntrance")))])])])]),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},p=[],h=e("bc3a"),f=e.n(h),b=e("b5ae"),v=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"loader-overlay"},[e("div",{staticClass:"spinner"})])}],C=(e("53a2"),{}),g=Object(c["a"])(C,v,_,!1,null,null,null),$=g.exports,k={name:"Auth",data:function(){return{loading:!1,number:"",password:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){"uz"==localStorage.local||"ru"==localStorage.local||"en"==localStorage.local?this.$i18n.locale=localStorage.local:this.updateLang()},methods:{updateLang:function(){localStorage.local=0,0==localStorage.local?(localStorage.local="ru",this.$i18n.locale="ru"):this.$i18n.locale=localStorage.local},auth:function(){var t=this;this.$v.$touch(),this.$v.number.$invalid||this.$v.password.$invalid||(this.loading=!0,f.a.post("".concat(this.api,"/login/"),{username:this.number,password:this.password}).then((function(a){var e=a.data;if(sessionStorage.setItem("auth",JSON.stringify(a.data)),sessionStorage.setItem("token",a.data.token),1==e.is_superuser)t.$router.push({name:"Dashboard"});else switch(e.branchType){case 1:t.$router.push({name:"BRDashboard"});break;case 2:t.$router.push({name:"SCDashborad"});break;case 3:t.$router.push({name:"WRDashboard"});break}})).catch((function(a){t.$toast.error(a)})).finally((function(){t.loading=!1})))},loadingAuth:function(){var t=localStorage.getItem("auth");t&&this.$router.push({name:"Panel"})},localReChange:function(){var t=localStorage.getItem("local");"uz"==t?(localStorage.local="ru",this.$i18n.locale="ru"):(localStorage.local="uz",this.$i18n.locale="uz")}},validations:{number:{required:b["required"],minLength:Object(b["minLength"])(2)},password:{required:b["required"],minLength:Object(b["minLength"])(2)}},created:function(){"uz"!=localStorage.local&&"ru"!=localStorage.local||(this.$i18n.locale=localStorage.local)}},y=k,w=(e("b23f"),Object(c["a"])(y,m,p,!1,null,"702272c1",null)),A=w.exports,M=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"dashboard"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("dashboard")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.id,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.id)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.branchName)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.id?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.id?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.items.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Код")]),e("p",{staticClass:"w-3"},[t._v("Название")]),e("p",{staticClass:"w-4"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.list,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.code))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.name))])])}))],2)]):t._e()])],1)})),0)])]),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},I=[],x={name:"Dashboard",data:function(){return{loading:!1,info:[],collapseActive:"",token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.listSoldProducts()},methods:{listSoldProducts:function(){var t=this;f.a.get("".concat(this.api,"/listSoldProducts/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++){var s={id:e+1,branchName:a.data[e].branchName,items:a.data[e].items};t.info.push(s)}})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t}}},N=x,D=(e("2b24"),Object(c["a"])(N,M,I,!1,null,null,null)),V=D.exports,T=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"models"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("Model"))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.id,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.id)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.name)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.id?"bxs-down-arrow":"bxs-right-arrow"]})]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(1,a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.openModalDeleteGroup(a.id)}}},[e("i",{staticClass:"bx bxs-trash"})])])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.id?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.list.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Код")]),e("p",{staticClass:"w-3"},[t._v("Название")]),e("p",{staticClass:"w-4"},[t._v("Цвет")]),e("p",{staticClass:"w-5"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.list,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.code))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.name))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.colorName))]),e("div",{staticClass:"btns w-5"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openNexPage(a)}}},[t._v("Открыть")]),e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(2,a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.openModalDelete(a.id)}}},[e("i",{staticClass:"bx bxs-trash"})])])])}))],2)]):t._e()])],1)})),0)])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-add"},[t.text?e("div",{staticClass:"text"},[e("p",{class:[1==t.madalParams?"active":""],on:{click:function(a){t.madalParams=1}}},[t._v("Группа моделей")]),e("p",{class:[2==t.madalParams?"active":""],on:{click:function(a){t.madalParams=2}}},[t._v("Модель")])]):t._e(),1==t.madalParams?e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.productGroupName,expression:"productGroupName"}],staticClass:"input",class:t.$v.productGroupName.$error?"input is-invalid":"input",attrs:{type:"text"},domProps:{value:t.productGroupName},on:{input:function(a){a.target.composing||(t.productGroupName=a.target.value)}}}),e("span",[t._v("Название моделя")])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addProductGroup()}}},[t._v("Добавить")]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editProductGroup()}}},[t._v("Изменить")]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("Отмена")])])]):t._e(),2==t.madalParams?e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.productGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.productGroupOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.productGroupValue,callback:function(a){t.productGroupValue=a},expression:"productGroupValue"}}),e("span",[t._v("Группа")])],1),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemplatesCode,expression:"productTemplatesCode"}],staticClass:"input",class:t.$v.productTemplatesCode.$error?"input is-invalid":"input",attrs:{type:"text"},domProps:{value:t.productTemplatesCode},on:{input:function(a){a.target.composing||(t.productTemplatesCode=a.target.value)}}}),e("span",[t._v("Код")])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.productTemplatesName,expression:"productTemplatesName"}],staticClass:"input",class:t.$v.productTemplatesName.$error?"input is-invalid":"input",attrs:{type:"text"},domProps:{value:t.productTemplatesName},on:{input:function(a){a.target.composing||(t.productTemplatesName=a.target.value)}}}),e("span",[t._v("Название")])]),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.productTemplatesColorValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.productTemplatesColorOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.productTemplatesColorValue,callback:function(a){t.productTemplatesColorValue=a},expression:"productTemplatesColorValue"}}),e("span",[t._v("Цвет")])],1),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addProductTemplates()}}},[t._v("Добавить")]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editProductTemplates()}}},[t._v("Изменить")]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("Отмена")])])]):t._e()]),t.modalDeleteGroup?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delProductGroup()}}},[e("p",[t._v("Вы уверенны что хотите удалить ?")]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ДА")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("НЕТ")])])])]):t._e(),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delProductTemplates()}}},[e("p",[t._v("Вы уверенны что хотите удалить ?")]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ДА")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("НЕТ")])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete||t.modalDeleteGroup,expression:"modalAdd || modalDelete || modalDeleteGroup"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},S=[],P=(e("b0c0"),e("7db0"),e("99af"),{name:"Models",data:function(){return{loading:!1,modalAdd:!1,modalDeleteGroup:!1,modalDelete:!1,btnChange:!1,collapseActive:0,text:!0,madalParams:1,info:[],productGroupId:"",productGroupName:"",productGroupValue:"",productGroupOption:[],productTemplatesId:"",productTemplatesCode:"",productTemplatesName:"",productTemplatesColorValue:"",productTemplatesColorOption:[],api:"",token:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.getColor(),this.getProductGroups()},methods:{openNexPage:function(t){this.$router.push({name:"ModelsItem",params:{productName:t.name,id:t.id}})},getColor:function(){var t=this;this.productTemplatesColorOption=[],f.a.get("".concat(this.api,"/colors/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++)t.productTemplatesColorOption.push({code:a.data[e].code,id:a.data[e].id,name:a.data[e].code+" "+a.data[e].name})})).catch((function(t){return console.log(t)}))},getProductGroups:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/productGroups/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++)t.info.push({id:a.data[e].id,name:a.data[e].name,list:[]});t.productGroupOption=a.data,t.getProductTemplates()})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},getProductTemplates:function(){var t=this;f.a.get("".concat(this.api,"/productTemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=function(e){t.info.find((function(t){t.id==a.data[e].groupId&&t.list.push(a.data[e])}))},s=0;s<a.data.length;s++)e(s);for(var n=function(a){for(var e=function(e){t.productTemplatesColorOption.find((function(s){s.id==t.info[a].list[e].color&&(t.info[a].list[e].colorName=s.name)}))},s=0;s<t.info[a].list.length;s++)e(s)},i=0;i<t.info.length;i++)n(i)})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},addProductGroup:function(){var t=this;this.$v.$touch(),this.$v.productGroupName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/productGroups/"),{name:this.productGroupName},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getProductGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},addProductTemplates:function(){var t=this;this.$v.$touch(),this.$v.productTemplatesCode.$invalid||this.$v.productTemplatesName.$invalid||this.$v.productGroupValue.$invalid||this.$v.productTemplatesColorValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/productTemplates/"),{code:this.productTemplatesCode,name:this.productTemplatesName,group:this.productGroupValue.id,color:this.productTemplatesColorValue.id},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getProductGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editProductGroup:function(){var t=this;this.$v.$touch(),this.$v.productGroupName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/productGroups/").concat(this.productGroupId,"/"),{name:this.productGroupName},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменено"),t.getProductGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editProductTemplates:function(){var t=this;this.$v.$touch(),this.$v.productTemplatesCode.$invalid||this.$v.productTemplatesName.$invalid||this.$v.productGroupValue.$invalid||this.$v.productTemplatesColorValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/productTemplates/").concat(this.productTemplatesId,"/"),{code:this.productTemplatesCode,name:this.productTemplatesName,group:this.productGroupValue.id,color:this.productTemplatesColorValue.id},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getProductGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delProductGroup:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/productGroup-delete/").concat(this.productGroupId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getProductGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},delProductTemplates:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/productTemplate-delete/").concat(this.productTemplatesId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getProductGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalAdd:function(){this.modalAdd=!0},openModalDeleteGroup:function(t){this.productGroupId=t,this.modalDeleteGroup=!0},openModalDelete:function(t){this.productTemplatesId=t,this.modalDelete=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDeleteGroup=!1,this.modalDelete=!1,this.btnChange=!1,this.text=!0,this.madalParams=1,this.productGroupId="",this.productGroupName="",this.productTemplatesCode="",this.productTemplatesName="",this.productGroupValue="",this.productTemplatesColorValue="",this.$v.$reset()},changeModalAdd:function(t,a){this.modalAdd=!0,this.btnChange=!0,this.text=!1,1==t?(this.madalParams=1,this.productGroupId=a.id,this.productGroupName=a.name):(this.madalParams=2,this.productTemplatesId=a.id,this.productTemplatesCode=a.code,this.productTemplatesName=a.name,this.productGroupValue=this.productGroupOption.find((function(t){if(t.id==a.group)return t})),this.productTemplatesColorValue=this.productTemplatesColorOption.find((function(t){if(t.id==a.color)return t})))},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t}},validations:{productGroupName:{required:b["required"]},productTemplatesName:{required:b["required"]},productGroupValue:{required:b["required"]},productTemplatesCode:{required:b["required"]},productTemplatesColorValue:{required:b["required"]}}}),G=P,O=(e("4bea"),Object(c["a"])(G,T,S,!1,null,"289c8fc1",null)),R=O.exports,Y=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modelsItem"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Models"}}},[e("i",{staticClass:"bx bx-folder"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$route.params.productName))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("count")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a,s){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.itemName))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.count)+" "+t._s(a.itemUnit))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delComponent()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.metterGroupOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterGroupValue,callback:function(a){t.metterGroupValue=a},expression:"metterGroupValue"}}),e("span",[t._v(t._s(t.$t("groupMatter")))])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.metterOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterValue,callback:function(a){t.metterValue=a},expression:"metterValue"}}),e("span",[t._v(t._s(t.$t("matter")))])],1),e("div",{staticClass:"name count"},[e("div",{staticClass:"position-relative"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.count,expression:"count",modifiers:{number:!0}}],staticClass:"input",class:t.$v.count.$error?"is-invalid":"",attrs:{id:"count",type:"number",autocomplete:"off"},domProps:{value:t.count},on:{input:function(a){a.target.composing||(t.count=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("p",[t._v(t._s(""!=t.unit?t.unit.name:""))])]),e("span",[t._v(t._s(t.$t("count")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addComponents()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editComponents()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},B=[],q={name:"ModelsItem",data:function(){return{loading:!1,modalAdd:!1,modalDelete:!1,btnChange:!1,info:[],metter:[],units:[],unit:"",metterGroupValue:"",metterGroupOption:[],metterValue:"",metterOption:[],metterAll:[],count:"",castelmetterValue:!1,token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.getComponents(),this.getMetterGroups()},methods:{getComponents:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/components/?productTemplate=").concat(this.$route.params.id),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},getMetterGroups:function(){var t=this;this.metterGroupOption=[],f.a.get("".concat(this.api,"/itemgroups/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++){var s={id:a.data[e].id,name:a.data[e].name,list:[]};t.metter.push(s)}for(var n=0;n<a.data.length;n++){var i={code:a.data[n].id,name:a.data[n].name};t.metterGroupOption.push(i)}t.getMetter()})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},getMetter:function(){var t=this;f.a.get("".concat(this.api,"/itemTemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<t.metter.length;e++)for(var s=0;s<a.data.length;s++)t.metter[e].id==a.data[s].group&&t.metter[e].list.push(a.data[s]);t.metterAll=a.data,t.getUnits()})).catch((function(t){return console.log(t)}))},getUnits:function(){var t=this;f.a.get("".concat(this.api,"/units/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.units=a.data})).catch((function(t){return console.log(t)}))},addComponents:function(){var t=this;this.$v.$touch(),this.$v.metterGroupValue.$invalid||this.$v.metterValue.$invalid||this.$v.count.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/components/"),{productTemplate:this.$route.params.id,itemTemplate:this.metterValue.id,count:this.count},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getComponents()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editComponents:function(){var t=this;this.$v.$touch(),this.$v.metterGroupValue.$invalid||this.$v.metterValue.$invalid||this.$v.count.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/components/").concat(this.componentId,"/"),{productTemplate:this.$route.params.id,itemTemplate:this.metterValue.id,count:this.count},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getComponents()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delComponent:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/component-delete/").concat(this.componentId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getComponents()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalDel:function(t){this.componentId=t,this.modalDelete=!0},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.componentId="",this.metterGroupValue="",this.metterValue="",this.count="",this.unit="",this.$v.$reset()},changeModalAdd:function(t){var a=this;this.modalAdd=!0,this.btnChange=!0,this.text=!1,this.componentId=t.id,this.count=t.count,this.castelmetterValue=!0,this.metterValue=this.metterAll.find((function(a){if(a.id==t.itemTemplate)return a})),this.metterGroupValue=this.metterGroupOption.find((function(t){if(t.code==a.metterValue.group)return t}))}},watch:{metterGroupValue:function(){var t=this;if(this.metterOption=[],""!=this.metterGroupValue){var a=this.metter.find((function(a){if(a.id==t.metterGroupValue.code)return a}));this.metterOption=a.list,0==this.castelmetterValue?this.metterValue="":this.castelmetterValue=!1}},metterValue:function(){var t=this;""!=this.metterValue&&(this.unit=this.units.find((function(a){if(a.id==t.metterValue.unit)return a})))}},validations:{metterGroupValue:{required:b["required"]},metterValue:{required:b["required"]},count:{required:b["required"]}}},U=q,j=(e("4b10"),Object(c["a"])(U,Y,B,!1,null,"01de086a",null)),z=j.exports,W=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"add"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("add")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},t._l(t.info,(function(a){return e("div",{key:a.index,staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:a.routerLink}}},[t._v(" "+t._s(t.$t(a.routerLinkName))+" ")])],1)})),0)])])},L=[],F={name:"Add",data:function(){return{info:[{routerLink:"Branches",routerLinkName:"branches"},{routerLink:"Employes",routerLinkName:"employes"},{routerLink:"Worktemplates",routerLinkName:"worktemplates"},{routerLink:"Colors",routerLinkName:"color"},{routerLink:"Units",routerLinkName:"Eдиницу измерения"},{routerLink:"Matters",routerLinkName:"Предмет"},{routerLink:"Users",routerLinkName:"users"}]}},methods:{}},E=F,H=(e("e077"),Object(c["a"])(E,W,L,!1,null,"28eb0dbe",null)),J=H.exports,K=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"branches"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Add"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("branches")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("typeBranch")))]),e("p",{staticClass:"w-3"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.name))]),e("p",{staticClass:"w-2"},[t._v(t._s(1==a.branchType?"Цех":2==a.branchType?t.$t("shop"):t.$t("store")))]),e("div",{staticClass:"w-3 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delBranch()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("name")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.branchName,expression:"branchName"}],staticClass:"input",class:t.$v.branchName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.branchName},on:{input:function(a){a.target.composing||(t.branchName=a.target.value)}}})]),e("div",{staticClass:"selects"},[e("span",[t._v(t._s(t.$t("typeBranch")))]),e("multiselect",{class:t.$v.branchTypeValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.branchTypeOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchTypeValue,callback:function(a){t.branchTypeValue=a},expression:"branchTypeValue"}})],1),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addBranch()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editBranch()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Q=[],X={name:"Branches",data:function(){return{loading:!1,info:[],branchId:"",branchName:"",branchTypeValue:"",branchTypeOptions:[{code:1,name:"Цех"},{code:2,name:this.$t("shop")},{code:3,name:this.$t("store")}],modalDelete:!1,btnChange:!1,modalAdd:!1,token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.getBranches()},methods:{openModalAdd:function(){this.modalAdd=!0,this.btnChange=!1},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.branchName="",this.branchTypeValue="",this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.branchId=t.id,this.branchName=t.name,this.branchTypeValue=this.branchTypeOptions.find((function(a){return a.code==t.branchType}))},openModalDel:function(t){this.modalDelete=!0,this.branchId=t},getBranches:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/branches/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=function(e){t.info.push({id:a.data[e].id,name:a.data[e].name,branchType:a.data[e].branchType,list:[]}),f.a.get("".concat(t.api,"/departments/?branch=").concat(a.data[e].id),{headers:{Authorization:"Token ".concat(t.token)}}).then((function(a){t.info[e].list=a.data})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)}))},s=0;s<a.data.length;s++)e(s)})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addBranch:function(){var t=this;this.$v.$touch(),this.$v.branchName.$invalid||this.$v.branchTypeValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/branches/"),{name:this.branchName,branchType:this.branchTypeValue.code},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getBranches()):t.$toast.error(a.data.msg)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editBranch:function(){var t=this;this.$v.$touch(),this.$v.branchName.$invalid||this.$v.branchTypeValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/branches/").concat(this.branchId,"/"),{name:this.branchName,branchType:this.branchTypeValue.code},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getBranches()):t.$toast.error(a.data.msg)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delBranch:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/branch-delete/").concat(this.branchId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getBranches()):t.$toast.error(a.data.msg)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1}))}},validations:{branchName:{required:b["required"]},branchTypeValue:{required:b["required"]}}},Z=X,tt=(e("3b9e"),Object(c["a"])(Z,K,Q,!1,null,"3e831f3c",null)),at=tt.exports,et=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"color"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Add"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("color")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("kod")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-3"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.code))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.name))]),e("div",{staticClass:"w-3 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delColor()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.addColor()}}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorCode,expression:"colorCode"}],staticClass:"input",class:t.$v.colorCode.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorCode},on:{input:function(a){a.target.composing||(t.colorCode=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorCode")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorName,expression:"colorName"}],staticClass:"input",class:t.$v.colorName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorName},on:{input:function(a){a.target.composing||(t.colorName=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorName")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editColor()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},st=[],nt={name:"Color",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,colorId:"",colorCode:"",colorName:"",info:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.getColor()},methods:{getColor:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/colors/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addColor:function(){var t=this;this.$v.$touch(),this.$v.colorCode.$invalid||this.$v.colorName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/colors/"),{name:this.colorName,code:this.colorCode},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getColor()):(t.$toast.error(a.data.msg),t.loading=!1)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()})))},editColor:function(){var t=this;this.$v.$touch(),this.$v.colorCode.$invalid||this.$v.colorName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/colors/").concat(this.colorId,"/"),{name:this.colorName,code:this.colorCode},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delColor:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/color-delete/").concat(this.colorId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalAdd:function(){this.modalAdd=!0,this.btnChange=!1},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.colorCode="",this.colorName="",this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.colorId=t.id,this.colorCode=t.code,this.colorName=t.name},openModalDel:function(t){this.colorId=t,this.modalDelete=!0}},validations:{colorCode:{required:b["required"]},colorName:{required:b["required"]}}},it=nt,ot=(e("d9ca"),Object(c["a"])(it,et,st,!1,null,"dd8b5428",null)),lt=ot.exports,ct=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"color"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Add"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("Eдиницу измерения"))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("kod")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-3"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a,s){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.name))]),e("div",{staticClass:"w-3 btns"},[e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delUnit()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nameUnit,expression:"nameUnit"}],staticClass:"input",class:t.$v.nameUnit.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.nameUnit},on:{input:function(a){a.target.composing||(t.nameUnit=a.target.value)}}}),e("span",[t._v(t._s(t.$t("name")))])]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addUnit()}}},[t._v(t._s(t.$t("add")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},rt=[],dt={name:"Units",data:function(){return{loading:!1,info:[],nameUnit:"",idUnit:"",modalDelete:!1,modalAdd:!1,token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loadUnits()},methods:{loadUnits:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/units/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addUnit:function(){var t=this;this.$v.$touch(),this.$v.nameUnit.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/units/"),{name:this.nameUnit},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добленно"),t.loadUnits()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd()})))},delUnit:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/units/").concat(this.idUnit,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удален"),t.loadUnits()):t.$toast.error(a.data.msg)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()}))},openModalAdd:function(){this.modalAdd=!0,this.btnChange=!1},closeModalAdd:function(){this.loading=!1,this.modalAdd=!1,this.modalDelete=!1,this.nameUnit="",this.idUnit="",this.$v.$reset()},openModalDel:function(t){this.idUnit=t,this.modalDelete=!0}},validations:{nameUnit:{required:b["required"]}}},ut=dt,mt=(e("d643"),Object(c["a"])(ut,ct,rt,!1,null,"f4788078",null)),pt=mt.exports,ht=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"matter"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Add"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("Предмет"))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.id,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.id)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.name)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.id?"bxs-down-arrow":"bxs-right-arrow"]})]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(1,a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.openModalDelGroup(a.id)}}},[e("i",{staticClass:"bx bxs-trash"})])])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.id?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.list.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Код")]),e("p",{staticClass:"w-3"},[t._v("Название")]),e("p",{staticClass:"w-4"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.list,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.code))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.name))]),e("div",{staticClass:"btns w-4"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(2,a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"bx bxs-trash"})])])])}))],2)]):t._e()])],1)})),0)])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-add"},[t.text?e("div",{staticClass:"text"},[e("p",{class:[1==t.madalParams?"active":""],on:{click:function(a){t.madalParams=1}}},[t._v("Группа предмет")]),e("p",{class:[2==t.madalParams?"active":""],on:{click:function(a){t.madalParams=2}}},[t._v("Предмет")])]):t._e(),1==t.madalParams?e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.metterGroupName,expression:"metterGroupName"}],staticClass:"input",class:t.$v.metterGroupName.$error?"input is-invalid":"input",attrs:{type:"text"},domProps:{value:t.metterGroupName},on:{input:function(a){a.target.composing||(t.metterGroupName=a.target.value)}}}),e("span",[t._v("Название группы предметы")])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addMetterGroup()}}},[t._v("Добавить")]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editMetterGroup()}}},[t._v("Изменить")]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("Отмена")])])]):t._e(),2==t.madalParams?e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterGroupNameValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.metterGroupNameOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterGroupNameValue,callback:function(a){t.metterGroupNameValue=a},expression:"metterGroupNameValue"}}),e("span",[t._v("Группа")])],1),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.metterCode,expression:"metterCode"}],staticClass:"input",class:t.$v.metterCode.$error?"input is-invalid":"input",attrs:{type:"number"},domProps:{value:t.metterCode},on:{input:function(a){a.target.composing||(t.metterCode=a.target.value)}}}),e("span",[t._v("Код")])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.metterName,expression:"metterName"}],staticClass:"input",class:t.$v.metterName.$error?"input is-invalid":"input",attrs:{type:"text"},domProps:{value:t.metterName},on:{input:function(a){a.target.composing||(t.metterName=a.target.value)}}}),e("span",[t._v("Название")])]),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterUnitValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"id",options:t.metterUnitOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterUnitValue,callback:function(a){t.metterUnitValue=a},expression:"metterUnitValue"}}),e("span",[t._v("Единица измерения")])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterColorValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.metterColorOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterColorValue,callback:function(a){t.metterColorValue=a},expression:"metterColorValue"}}),e("span",[t._v("Цвет")])],1),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addMetter()}}},[t._v("Добавить")]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editMetter()}}},[t._v("Изменить")]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("Отмена")])])]):t._e()]),t.modalDeleteGroup?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delMetterGroup()}}},[e("p",[t._v("Вы уверенны что хотите удалить ?")]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ДА")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDeleteGroup=!t.modalDeleteGroup}}},[t._v("НЕТ")])])])]):t._e(),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.deleteMetter()}}},[e("p",[t._v("Вы уверенны что хотите удалить ?")]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ДА")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v("НЕТ")])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete||t.modalDeleteGroup,expression:"modalAdd || modalDelete || modalDeleteGroup"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},ft=[],bt={name:"Matters",data:function(){return{loading:!1,metterGroup:[],info:[],collapseActive:0,modalAdd:!1,modalDelete:!1,modalDeleteGroup:!1,madalParams:1,btnChange:!1,text:!0,metterGroupNameValue:null,metterGroupNameOption:[],metterGroupName:"",metterId:"",metterName:"",metterCode:"",metterColorValue:"",metterColorOption:[],metterUnitValue:null,metterUnitOption:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.getMetterGroups(),this.getColor(),this.units()},methods:{getMetterGroups:function(){var t=this;this.info=[],this.metterGroupNameOption=[],f.a.get("".concat(this.api,"/itemgroups/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++){var s={id:a.data[e].id,name:a.data[e].name,list:[]};t.info.push(s)}for(var n=0;n<a.data.length;n++){var i={code:a.data[n].id,name:a.data[n].name};t.metterGroupNameOption.push(i)}t.getMetter()})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))}))},getMetter:function(){var t=this;f.a.get("".concat(this.api,"/itemTemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<t.info.length;e++)for(var s=0;s<a.data.length;s++)t.info[e].id==a.data[s].group&&t.info[e].list.push(a.data[s])})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},getColor:function(){var t=this;f.a.get("".concat(this.api,"/colors/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++){var s={code:a.data[e].code,id:a.data[e].id,name:"".concat(a.data[e].code," ").concat(a.data[e].name)};t.metterColorOption.push(s)}})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))}))},units:function(){var t=this;f.a.get("".concat(this.api,"/units/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.metterUnitOption=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))}))},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t},addMetterGroup:function(){var t=this;this.$v.$touch(),this.$v.metterGroupName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/itemgroups/"),{name:this.metterGroupName},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getMetterGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editMetterGroup:function(){var t=this;this.$v.$touch(),this.$v.metterGroupName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/itemgroups/").concat(this.metterGroupId,"/"),{name:this.metterGroupName},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменено"),t.getMetterGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delMetterGroup:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/itemgroup-delete/").concat(this.metterGroupId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){0==a.data.code?(t.$toast.warning("Очистите группу"),t.getMetterGroups()):1==a.data.code?(t.$toast.success("Удалено"),t.getMetterGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalDelGroup:function(t){console.log(t),this.metterGroupId=t,this.modalDeleteGroup=!0},addMetter:function(){var t=this;this.$v.$touch(),this.$v.metterName.$invalid||this.$v.metterUnitValue.$invalid||this.$v.metterCode.$invalid||this.$v.metterGroupNameValue.$invalid||this.$v.metterGroupNameValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/itemTemplates/"),{code:this.metterCode,name:this.metterName,unit:this.metterUnitValue.id,group:this.metterGroupNameValue.code,color:this.metterColorValue.id},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getMetterGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editMetter:function(){var t=this;this.$v.$touch(),this.$v.metterCode.$invalid||this.$v.metterName.$invalid||this.$v.metterUnitValue.$invalid||this.$v.metterGroupNameValue.$invalid||this.$v.metterColorValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,this.loading=!0,f.a.put("".concat(this.api,"/itemTemplates/").concat(this.metterId,"/"),{code:this.metterCode,name:this.metterName,unit:this.metterUnitValue.id,group:this.metterGroupNameValue.code,color:this.metterColorValue.id},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменено"),t.getMetterGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},deleteMetter:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/itemTemplate-delete/").concat(this.metterId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getMetterGroups()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalDel:function(t){this.metterId=t,this.modalDelete=!0},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.modalDeleteGroup=!1,this.text=!0,this.btnChange=!1,this.madalParams=1,this.metterGroupId="",this.metterGroupName="",this.metterId="",this.metterName="",this.metterCode="",this.metterGroupNameValue=[],this.metterUnitValue=[],this.metterColorValue=[],this.$v.$reset()},changeModalAdd:function(t,a){this.modalAdd=!0,this.btnChange=!0,this.text=!1,1==t?(this.madalParams=1,this.metterGroupId=a.id,this.metterGroupName=a.name):(this.madalParams=2,this.metterGroupNameValue=this.metterGroupNameOption.find((function(t){if(t.code==a.group)return a})),this.metterId=a.id,this.metterName=a.name,this.metterCode=a.code,this.metterUnitValue=this.metterUnitOption.find((function(t){if(t.id==a.unit)return a})),this.metterColorValue=this.metterColorOption.find((function(t){if(t.id==a.color)return a})))}},validations:{metterGroupName:{required:b["required"]},metterName:{required:b["required"]},metterCode:{required:b["required"]},metterGroupNameValue:{required:b["required"]},metterUnitValue:{required:b["required"]},metterColorValue:{required:b["required"]}}},vt=bt,_t=(e("8c8c"),Object(c["a"])(vt,ht,ft,!1,null,"646f8f77",null)),Ct=_t.exports,gt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"matter"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Add"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("groups"))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.id,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.id)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.name)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.id?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.id?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.list.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Название")]),e("p",{staticClass:"w-3"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.list,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.name))]),e("div",{staticClass:"btns w-3"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"bx bxs-trash"})])])])}))],2)]):t._e()])],1)})),0)])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("name")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.groupName,expression:"groupName"}],staticClass:"input",class:t.$v.groupName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.groupName},on:{input:function(a){a.target.composing||(t.groupName=a.target.value)}}})]),e("div",{staticClass:"selects"},[e("span",[t._v(t._s(t.$t("typeBranch")))]),e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.branchOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}})],1),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addGroup()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editGroup()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delGroup()}}},[e("p",[t._v("Вы уверенны что хотите удалить ?")]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ДА")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v("НЕТ")])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},$t=[],kt={name:"Groups",data:function(){return{loading:!1,info:[],collapseActive:0,modalAdd:!1,modalDelete:!1,madalParams:1,btnChange:!1,text:!0,groupId:"",groupName:"",branchValue:"",branchOptions:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.getBranchesGroups()},methods:{getBranchesGroups:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/branches/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++)1==a.data[e].branchType&&(t.info.push({id:a.data[e].id,name:a.data[e].name,branchType:a.data[e].branchType,list:[]}),t.branchOptions.push({code:a.data[e].id,name:a.data[e].name}));t.getGropus()})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},getGropus:function(){for(var t=this,a=function(a){f.a.get("".concat(t.api,"/departments/?branch=").concat(t.info[a].id),{headers:{Authorization:"Token ".concat(t.token)}}).then((function(e){if(e.data!=[])for(var s=0;s<e.data.length;s++)t.info[a].list.push(e.data[s])})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)}))},e=0;e<this.info.length;e++)a(e)},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t},addGroup:function(){var t=this;this.$v.$touch(),this.$v.groupName.$invalid||this.$v.branchValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/departments/"),{name:this.groupName,branch:this.branchValue.code},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getBranchesGroups()):t.$toast.error(a.data.msg)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editGroup:function(){var t=this;this.$v.$touch(),this.$v.groupName.$invalid||this.$v.branchValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/departments/").concat(this.groupId,"/"),{name:this.groupName,branch:this.branchValue.code},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getBranchesGroups()):t.$toast.error(a.data.msg)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delGroup:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/department-delete/").concat(this.groupId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getBranchesGroups()):t.$toast.error(a.data.msg)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalDel:function(t){this.groupId=t,this.modalDelete=!0},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.groupId="",this.groupName="",this.branchValue="",this.branchOptions=[],this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.text=!1,this.groupId=t.id,this.groupName=t.name,this.branchValue=this.branchOptions.find((function(a){if(a.code==t.branch)return t}))}},validations:{groupName:{required:b["required"]},branchValue:{required:b["required"]}}},yt=kt,wt=(e("a82c"),Object(c["a"])(yt,gt,$t,!1,null,"585f958f",null)),At=wt.exports,Mt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"Employes"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Add"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("employes"))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.id,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__item"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(1,a.id)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.name)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.id?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.id?e("div",{staticClass:"clps__list pt-2"},[0!=a.list.length?e("ul",{staticClass:"clps-menu-down"},t._l(a.list,(function(a){return e("li",{key:a.id,staticClass:"clps-menu-down__item clps-down"},[e("div",{staticClass:"clps-down__button",on:{click:function(e){return t.collapseToggle(2,a.id)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.name)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseDownActive==a.id?"bxs-down-arrow":"bxs-right-arrow"]})]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(2,a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(2,a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseDownActive==a.id?e("div",{staticClass:"clps-down__list list pt-2"},[e("div",{staticClass:"custom-table-down"},[0!=a.listItem.length?e("div",{staticClass:"custom-table-down__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("ФИО")]),e("p",{staticClass:"w-3"},[t._v("Работа")]),e("p",{staticClass:"w-4"})]):e("div",{staticClass:"custom-table-down__header"},[e("p",[t._v("Пусто")])]),t._l(a.listItem,(function(a,s){return e("div",{key:a.id,staticClass:"custom-table-down__body pt-2"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.name))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.jobTitle))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(1,a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(1,a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])}))],2)]):t._e()])],1)})),0):0==a.list.length?e("div",{staticClass:"clps-menu-down__header"},[e("p",[t._v("Пусто")])]):t._e()]):t._e()])],1)])})),0)])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[t.text?e("div",{staticClass:"text"},[e("p",{class:[1==t.madalParams?"active":""],on:{click:function(a){t.madalParams=1}}},[t._v(t._s(t.$t("employes")))]),e("p",{class:[2==t.madalParams?"active":""],on:{click:function(a){t.madalParams=2}}},[t._v(t._s(t.$t("employesGroup")))])]):t._e(),1==t.madalParams?e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("span",[t._v(t._s(t.$t("branch")))]),e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"id",options:t.branchOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}})],1),e("div",{staticClass:"selects"},[e("span",[t._v(t._s(t.$t("groups")))]),e("multiselect",{attrs:{placeholder:"",label:"name","track-by":"id",options:t.departmentOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.departmentValue,callback:function(a){t.departmentValue=a},expression:"departmentValue"}})],1),e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("name")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.employesName,expression:"employesName"}],staticClass:"input",class:t.$v.employesName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.employesName},on:{input:function(a){a.target.composing||(t.employesName=a.target.value)}}})]),e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("job")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.employesJobTitle,expression:"employesJobTitle"}],staticClass:"input",class:t.$v.employesJobTitle.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.employesJobTitle},on:{input:function(a){a.target.composing||(t.employesJobTitle=a.target.value)}}})]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addEmployes()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editEmployes()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])]):t._e(),2==t.madalParams?e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("span",[t._v(t._s(t.$t("branch")))]),e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"id",options:t.branchOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}})],1),e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("nameGroup")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.employesName,expression:"employesName"}],staticClass:"input",class:t.$v.employesName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.employesName},on:{input:function(a){a.target.composing||(t.employesName=a.target.value)}}})]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addDepartment()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editDepartments()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])]):t._e()]):t._e(),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delEmploye()}}},[e("p",[t._v("Вы уверенны что хотите удалить ?")]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ДА")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v("НЕТ")])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},It=[],xt={name:"Employes",data:function(){return{loading:!1,info:[],collapseActive:0,collapseDownActive:0,modalAdd:!1,modalDelete:!1,madalParams:1,btnChange:!1,text:!0,employesId:"",employesName:"",employesJobTitle:"",branchValue:"",branchOptions:[],branchType:[{code:1,name:"Цех"},{code:2,name:this.$t("shop")},{code:3,name:this.$t("store")}],departmentValue:"",departmentOptions:[],departmentsId:"",token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.getBranchesGroups()},methods:{getBranchesGroups:function(){var t=this;this.info=[],this.branchOptions=[],f.a.get("".concat(this.api,"/branches/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++)t.info.push({id:a.data[e].id,name:a.data[e].name,branchType:a.data[e].branchType,list:[]}),t.branchOptions.push(a.data[e]);t.getGropus()})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))}))},getGropus:function(){var t=this;this.departmentOptions=[];for(var a=function(a){f.a.get("".concat(t.api,"/departments/?branch=").concat(t.info[a].id),{headers:{Authorization:"Token ".concat(t.token)}}).then((function(e){if(e.data!=[])for(var s=0;s<e.data.length;s++)t.info[a].list.push({id:e.data[s].id,branch:e.data[s].branch,name:e.data[s].name,listItem:[]}),t.departmentOptions.push(e.data[s])})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)}));var e=a+1;t.info.length==e&&(console.log("asd"),setTimeout((function(){t.getDepartment()}),3e3))},e=0;e<this.info.length;e++)a(e)},getDepartment:function(){for(var t=this,a=function(a){if(1==t.info[a].branchType)for(var e=function(e){f.a.get("".concat(t.api,"/employes/?department=").concat(t.info[a].list[e].id),{headers:{Authorization:"Token ".concat(t.token)}}).then((function(s){if(s.data!=[])for(var n=0;n<s.data.length;n++)t.info[a].list[e].listItem.push(s.data[n])})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)}))},s=0;s<t.info[a].list.length;s++)e(s)},e=0;e<this.info.length;e++)a(e);setTimeout((function(){t.closeModalAdd(),t.loading=!1}),3e3)},collapseToggle:function(t,a){switch(t){case 1:this.collapseActive==a?this.collapseActive=0:this.collapseActive=a;break;case 2:this.collapseDownActive==a?this.collapseDownActive=0:this.collapseDownActive=a;break}},addEmployes:function(){var t=this;this.$v.$touch(),this.$v.employesName.$invalid||this.$v.branchValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/employes/"),{name:this.employesName,jobTitle:this.employesJobTitle,branch:this.branchValue.id,department:this.departmentValue.id||null},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getBranchesGroups()):(t.$toast.error(a.data.msg),t.closeModalAdd())})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){})))},editEmployes:function(){var t=this;this.$v.$touch(),this.$v.employesName.$invalid||this.$v.branchValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/employes/").concat(this.employesId,"/"),{name:this.employesName,jobTitle:this.employesJobTitle,branch:this.branchValue.id,department:this.departmentValue.id||null},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getBranchesGroups()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()})))},delEmploye:function(){var t=this;this.loading=!0,1==this.madalParams?f.a.delete("".concat(this.api,"/employe-delete/").concat(this.employesId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.modalDelete=!1,t.getBranchesGroups()):(t.$toast.error(a.data.msg),t.closeModalAdd(),t.loading=!1)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){})):f.a.delete("".concat(this.api,"/department-delete/").concat(this.departmentsId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.modalDelete=!1,t.getBranchesGroups()):(t.$toast.error(a.data.msg),t.loading=!1)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){}))},addDepartment:function(){var t=this;this.$v.$touch(),this.$v.employesName.$invalid||this.$v.branchValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/departments/"),{name:this.employesName,branch:this.branchValue.id},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getBranchesGroups()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editDepartments:function(){var t=this;this.$v.$touch(),this.$v.employesName.$invalid||this.$v.branchValue.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/departments/").concat(this.departmentsId,"/"),{name:this.employesName,branch:this.branchValue.id},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getBranchesGroups()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()})))},openModalDel:function(t,a){switch(t){case 1:this.employesId=a,this.madalParams=1;break;case 2:this.departmentsId=a,this.madalParams=2;break}this.modalDelete=!0},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.employesId="",this.employesName="",this.branchValue="",this.employesJobTitle="",this.departmentValue=[],this.department=!1,this.text=!0,this.madalParams=1,this.$v.$reset()},changeModalAdd:function(t,a){switch(this.modalAdd=!0,this.btnChange=!0,this.text=!1,t){case 1:this.employesId=a.id,this.employesName=a.name,this.employesJobTitle=a.jobTitle,this.branchValue=this.branchOptions.find((function(t){if(t.id==a.branch)return t})),this.departmentValue=this.departmentOptions.find((function(t){if(t.id==a.department)return t})),this.madalParams=1;break;case 2:this.departmentsId=a.id,this.employesName=a.name,this.branchValue=this.branchOptions.find((function(t){if(t.id==a.branch)return t})),this.madalParams=2;break}}},watch:{branchValue:function(){var t=this;setTimeout((function(){1==t.branchValue.branchType?t.department=!0:t.department=!1}),500)}},validations:{employesName:{required:b["required"]},employesJobTitle:{required:b["required"]},branchValue:{required:b["required"]}}},Nt=xt,Dt=(e("32ac"),Object(c["a"])(Nt,Mt,It,!1,null,"6f4bfe83",null)),Vt=Dt.exports,Tt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"worktemplates"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Add"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("worktemplates")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("pricePerOne")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a,s){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.name))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.pricePerOne)+" sum")]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delWorktemplates()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.clear()}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nameWorktemplates,expression:"nameWorktemplates"}],staticClass:"input",class:t.$v.nameWorktemplates.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.nameWorktemplates},on:{input:function(a){a.target.composing||(t.nameWorktemplates=a.target.value)}}}),e("span",[t._v(t._s(t.$t("name")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.priceWorktemplates,expression:"priceWorktemplates"}],staticClass:"input",class:t.$v.priceWorktemplates.$error?"is-invalid":"",attrs:{type:"number"},domProps:{value:t.priceWorktemplates},on:{input:function(a){a.target.composing||(t.priceWorktemplates=a.target.value)}}}),e("span",[t._v(t._s(t.$t("price")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addWorktemplates()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editWorktemplates()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.clear()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},St=[],Pt={name:"Worktemplates",data:function(){return{info:[],nameWorktemplates:"",priceWorktemplates:"",idWorktemplates:"",btnChange:!1,modalDelete:!1,modalAdd:!1,loading:!1,token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loadWorktemplates()},methods:{loadWorktemplates:function(){var t=this;this.loading=!0,f.a.get("".concat(this.api,"/worktemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addWorktemplates:function(){var t=this;this.$v.$touch(),this.$v.$invalid||(this.loading=!0,f.a.post("".concat(this.api,"/worktemplates/"),{name:this.nameWorktemplates,pricePerOne:this.priceWorktemplates},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?t.$toast.success("Добленно"):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.loadWorktemplates(),t.clear()})))},delWorktemplates:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/worktemplate-delete/").concat(this.idWorktemplates,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?t.$toast.success("Удалено"):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.loadWorktemplates(),t.clear()}))},editWorktemplates:function(){var t=this;this.$v.$touch(),this.$v.$invalid||(this.loading=!0,f.a.put("".concat(this.api,"/worktemplates/"),{name:this.nameWorktemplates,pricePerOne:this.priceWorktemplates},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?t.$toast.success("Изменино"):"Ok"!=a.data.msg&&t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.loadWorktemplates(),t.clear()})))},openModalAdd:function(){this.modalAdd=!0,this.btnChange=!1},clear:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.nameWorktemplates="",this.priceWorktemplates="",this.idWorktemplates="",this.$v.$reset()},openModalDel:function(t){this.idWorktemplates=t,this.modalDelete=!0},changeModalAdd:function(t){this.idWorktemplates=t.id,this.nameWorktemplates=t.name,this.priceWorktemplates=t.pricePerOne,this.btnChange=!0,this.modalAdd=!0}},validations:{nameWorktemplates:{required:b["required"]},priceWorktemplates:{required:b["required"]}}},Gt=Pt,Ot=(e("3499"),Object(c["a"])(Gt,Tt,St,!1,null,"477004de",null)),Rt=Ot.exports,Yt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"users"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Add"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("users")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("username")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("userType")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.username))]),e("p",{staticClass:"w-2"},[t._v(t._s(null==a.branchName?"":a.branchName))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.is_superuser?"ADMIN":"EMPLOYEE"))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.Id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delUser()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.addUser()}}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.branchTypeValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"id",options:t.branchTypeOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchTypeValue,callback:function(a){t.branchTypeValue=a},expression:"branchTypeValue"}}),e("span",[t._v(t._s(t.$t("groupMatter")))])],1),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticClass:"input",class:t.$v.userName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.userName},on:{input:function(a){a.target.composing||(t.userName=a.target.value)}}}),e("span",[t._v(t._s(t.$t("userName")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",class:t.$v.password.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}}),e("span",[t._v(t._s(t.$t("password")))])]),e("div",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.superUser,expression:"superUser"}],staticClass:"input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.superUser)?t._i(t.superUser,null)>-1:t.superUser},on:{change:function(a){var e=t.superUser,s=a.target,n=!!s.checked;if(Array.isArray(e)){var i=null,o=t._i(e,i);s.checked?o<0&&(t.superUser=e.concat([i])):o>-1&&(t.superUser=e.slice(0,o).concat(e.slice(o+1)))}else t.superUser=n}}}),e("span",[t._v(t._s(t.$t("superUser")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editColor()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Bt=[],qt={name:"Users",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,branchTypeValue:"",branchTypeOptions:[],userId:"",password:"",userName:"",superUser:!1,info:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.getBranches(),this.getUsers()},methods:{getBranches:function(){var t=this;this.branchTypeOptions=[],f.a.get("".concat(this.api,"/branches/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.branchTypeOptions=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){}))},getUsers:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/getUsers/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addUser:function(){var t=this;this.$v.$touch(),this.$v.password.$invalid||this.$v.userName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/createUser/"),{branchId:this.branchTypeValue.id,username:this.userName,password:this.password,is_superuser:this.superUser},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getUsers()):(t.$toast.error(a.data.msg),t.loading=!1)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()})))},editColor:function(){var t=this;this.$v.$touch(),this.$v.password.$invalid||this.$v.userName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/updateUser/"),{id:this.userId,username:this.userName,password:this.password,branchId:this.branchTypeValue.id,is_superuser:this.superUser},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getUsers()):(t.$toast.error(a.data.msg),t.loading=!1)})).catch((function(a){console.log(a),t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()})))},delUser:function(){var t=this;this.loading=!0,f.a.get("".concat(this.api,"/deleteUser?id=").concat(this.userId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getUsers()):(t.$toast.error(a.data.msg),t.loading=!1)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()}))},openModalAdd:function(){this.modalAdd=!0,this.btnChange=!1},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.password="",this.userName="",this.superUser=!1,this.branchTypeValue="",this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.userId=t.Id,this.password=t.password,this.userName=t.username,this.superUser=t.is_superuser,this.branchTypeValue={id:t.branchId,branchType:t.branchTypeName,name:t.branchName}},openModalDel:function(t){this.userId=t,this.modalDelete=!0}},watch:{superUser:function(){1==this.superUser&&(this.branchTypeValue=[])},branchTypeValue:function(){this.branchTypeValue!=[]&&(this.superUser=!1)}},validations:{branchTypeValue:{required:b["required"]},password:{required:b["required"]},userName:{required:b["required"]}}},Ut=qt,jt=(e("a2fc"),Object(c["a"])(Ut,Yt,Bt,!1,null,"94ff4b0a",null)),zt=jt.exports,Wt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"add"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Склад")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"FinishedProduct"}}},[t._v(" "+t._s(t.$t("finishedProduct"))+" ")])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"RawMaterial"}}},[t._v(" "+t._s(t.$t("Сырье"))+" ")])],1)])])])},Lt=[],Ft={name:"Add",data:function(){return{}},methods:{}},Et=Ft,Ht=(e("ba32"),Object(c["a"])(Et,Wt,Lt,!1,null,"28b1c0d9",null)),Jt=Ht.exports,Kt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"RawMaterial"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Store"}}},[e("i",{staticClass:"bx bxs-cylinder"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("Сырье"))])])],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12 mb-3"},[e("div",{staticClass:"filter-card"},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{"deselect-label":"Невозможно удалить","allow-empty":!1,label:"name","track-by":"id",options:t.branchOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}}),e("span",[t._v("Филиал")])],1)])])]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.index,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.name)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.name)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.name?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.name?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.items.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Код")]),e("p",{staticClass:"w-3"},[t._v("Название")]),e("p",{staticClass:"w-4"},[t._v("Цвет")]),e("p",{staticClass:"w-5"},[t._v("Кол.")]),e("p",{staticClass:"w-6"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.items,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.Code))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.Name))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.ColorCode)+" "+t._s(a.Color))]),e("p",{staticClass:"w-5"},[t._v(t._s(a.Count)+" "+t._s(a.Unit))]),e("div",{staticClass:"btns w-6"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})])])])}))],2)]):t._e()])],1)})),0)])]),""!=t.branchValue?e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-add"},[1!=t.btnChange?e("form",{staticClass:"form",attrs:{action:""}},[e("h1",{staticClass:"form__title"},[t._v("Филиал: "+t._s(t.branchValue.name))]),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"id",options:t.metterGroupOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterGroupValue,callback:function(a){t.metterGroupValue=a},expression:"metterGroupValue"}}),e("span",[t._v(t._s(t.$t("groupMatter")))])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.metterOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterValue,callback:function(a){t.metterValue=a},expression:"metterValue"}}),e("span",[t._v(t._s(t.$t("matter")))])],1),e("p",{staticClass:"form__title"},[t._v("Цвет код: "+t._s(t.metterValue.itemColor))]),e("p",{staticClass:"form__title"},[t._v("Цвет: "+t._s(t.metterValue.itemColorName))]),e("div",{staticClass:"name count"},[e("div",{staticClass:"position-relative",class:t.$v.count.$error?"is-invalid":""},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.count,expression:"count",modifiers:{number:!0}}],staticClass:"input",attrs:{id:"count",type:"number",autocomplete:"off"},domProps:{value:t.count},on:{input:function(a){a.target.composing||(t.count=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("p",[t._v(t._s(""!=t.unitValue?t.unitValue.name:""))])]),e("span",[t._v(t._s(t.$t("count")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.additems()}}},[t._v("Добавить")]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("Отмена")])])]):1==t.btnChange?e("form",{staticClass:"form",attrs:{action:""}},[e("p",{staticClass:"form__title"},[e("span",[t._v("Филиал:")]),t._v(" "+t._s(t.branchValue.name))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Название:")]),t._v(" "+t._s(t.infoChange.Code)+" "+t._s(t.infoChange.Name))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Цвет:")]),t._v(" "+t._s(t.infoChange.ColorCode)+" "+t._s(t.infoChange.Color))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Кол-во:")]),t._v(" "+t._s(t.count))]),e("div",{staticClass:"count-btn"},[e("button",{staticClass:"btn btn-left bg-danger",attrs:{disabled:t.btnIsDisabled},on:{click:function(a){return a.preventDefault(),t.minus()}}},[e("i",{staticClass:"bx bx-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.countItem,expression:"countItem",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.countItem},on:{input:function(a){a.target.composing||(t.countItem=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-right bg-success",on:{click:function(a){return a.preventDefault(),t.plus()}}},[e("i",{staticClass:"bx bx-plus"})])]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:t.btnSubmitIsDisabled},on:{click:function(a){return a.preventDefault(),t.editItems()}}},[t._v("Изменить")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("Отмена")])])]):t._e()]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.deleteMetter()}}},[e("p",[t._v("Вы уверенны что хотите удалить ?")]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ДА")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v("НЕТ")])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Qt=[],Xt=(e("2af1"),{name:"RawMaterial",data:function(){return{loading:!1,modalAdd:!1,modalDelete:!1,btnChange:!1,castelmetterValue:!1,btnSubmitIsDisabled:!0,collapseActive:0,branchValue:"",branchOption:[],metterGroupValue:"",metterGroupOption:[],metter:[],metterValue:"",metterOption:[],unitValue:"",unitOption:[],infoChange:[],count:0,countItem:0,countParametrs:0,info:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.getBranches()},methods:{getBranches:function(){var t=this;this.branchOption=[],f.a.get("".concat(this.api,"/branches/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.branchOption=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1,t.getMetterGroups()}))},getMetterGroups:function(){var t=this;this.metterGroupOption=[],this.metterOption=[],f.a.get("".concat(this.api,"/itemgroups/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++){var s={id:a.data[e].id,name:a.data[e].name,list:[]};t.metter.push(s)}t.metterGroupOption=a.data,t.getMetter()})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},getMetter:function(){var t=this;f.a.get("".concat(this.api,"/itemTemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<t.metter.length;e++)for(var s=0;s<a.data.length;s++)t.metter[e].id==a.data[s].group&&t.metter[e].list.push(a.data[s]);t.getUnits()})).catch((function(t){return console.log(t)}))},getUnits:function(){var t=this;f.a.get("".concat(this.api,"/units/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.unitOption=a.data})).catch((function(t){return console.log(t)}))},itemsbybranch:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/itemsbybranch/?branchId=").concat(this.branchValue.id),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t},additems:function(){var t=this;this.$v.$touch(),this.$v.branchValue.$invalid||this.$v.metterValue.$invalid||this.$v.count.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/additems/"),{branch:this.branchValue.id,itemTemplate:this.metterValue.id,count:+this.count},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.itemsbybranch()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editItems:function(){var t=this;this.$v.$touch(),0==this.count?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(0==this.countParametrs?f.a.post("".concat(this.api,"/delitems/"),{branch:this.branchValue.id,itemTemplate:this.infoChange.Id,count:Math.abs(this.count)},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменено"),t.itemsbybranch()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})):1==this.countParametrs&&(this.loading=!0,f.a.post("".concat(this.api,"/additems/"),{branch:this.branchValue.id,itemTemplate:this.infoChange.Id,count:+this.count},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменено"),t.itemsbybranch()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))),this.loading=!0)},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.text=!0,this.btnChange=!1,this.metterGroupValue="",this.metterValue="",this.unitValue="",this.count=0,this.countItem=0,this.infoChange=[],this.$v.$reset()},changeModalAdd:function(t){console.log(t),this.modalAdd=!0,this.btnChange=!0,this.infoChange=t,this.countItem=t.Count},minus:function(){this.count=this.count-1,this.countItem=this.countItem-1,this.countParametrs=0},plus:function(){this.count=this.count+1,this.countItem=this.countItem+1,this.countParametrs=1}},watch:{branchValue:function(){this.itemsbybranch()},metterGroupValue:function(){var t=this;if(this.metterOption=[],""!=this.metterGroupValue){var a=this.metter.find((function(a){if(a.id==t.metterGroupValue.id)return a}));this.metterOption=a.list,0==this.castelmetterValue?this.metterValue="":this.castelmetterValue=!1}},metterValue:function(){var t=this;""!=this.metterValue&&(this.unitValue=this.unitOption.find((function(a){if(a.id==t.metterValue.unit)return a})))},count:function(){0!=this.count?this.btnSubmitIsDisabled=!1:this.btnSubmitIsDisabled=!0},countItem:function(){0==this.countItem?this.btnIsDisabled=!0:this.btnIsDisabled=!1,this.count=this.countItem-this.infoChange.Count,-1==Math.sign(this.count)?this.countParametrs=0:1==Math.sign(this.count)&&(this.countParametrs=1)},plus:function(){this.modelParametrs=1},minus:function(){this.modelParametrs=0}},validations:{branchValue:{required:b["required"]},metterGroupValue:{required:b["required"]},metterValue:{required:b["required"]},count:{required:b["required"]}}}),Zt=Xt,ta=(e("9b5f"),Object(c["a"])(Zt,Kt,Qt,!1,null,"2b45c3ce",null)),aa=ta.exports,ea=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"RawMaterial"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Store"}}},[e("i",{staticClass:"bx bxs-cylinder"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("finishedProduct"))])])],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12 mb-3"},[e("div",{staticClass:"filter-card"},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{"deselect-label":"Невозможно удалить","allow-empty":!1,label:"name","track-by":"id",options:t.branchOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}}),e("span",[t._v("Филиал")])],1)])])]),t.info!=[]?e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.groupId,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.groupId)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.groupName)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.groupId?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.groupId?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.items.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Код")]),e("p",{staticClass:"w-3"},[t._v("Название")]),e("p",{staticClass:"w-4"},[t._v("Цвет")]),e("p",{staticClass:"w-5"},[t._v("Кол.")]),e("p",{staticClass:"w-6"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.items,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.Code))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.Name))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.ColorCode)+" "+t._s(a.Color))]),e("p",{staticClass:"w-5"},[t._v(t._s(a.Count)+" "+t._s(a.Unit))]),e("div",{staticClass:"btns w-6"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})])])])}))],2)]):t._e()])],1)})),0)])]):t._e(),""!=t.branchValue?e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-add"},[1!=t.btnChange?e("form",{staticClass:"form",attrs:{action:""}},[e("h1",{staticClass:"form__title"},[t._v("Филиал: "+t._s(t.branchValue.name))]),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.modelGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"id",options:t.modelGroupOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.modelGroupValue,callback:function(a){t.modelGroupValue=a},expression:"modelGroupValue"}}),e("span",[t._v(t._s(t.$t("groupMatter")))])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.modelValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"nameCode","track-by":"id",options:t.modelOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.modelValue,callback:function(a){t.modelValue=a},expression:"modelValue"}}),e("span",[t._v(t._s(t.$t("matter")))])],1),e("p",{staticClass:"form__title"},[t._v("Цвет: "+t._s(t.modelValue.colorCode+" "+t.modelValue.colorName))]),e("div",{staticClass:"name count"},[e("div",{staticClass:"position-relative",class:t.$v.count.$error?"is-invalid":""},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.count,expression:"count",modifiers:{number:!0}}],staticClass:"input",attrs:{id:"count",type:"number",autocomplete:"off"},domProps:{value:t.count},on:{input:function(a){a.target.composing||(t.count=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("p",[t._v(t._s(""!=t.unitValue?t.unitValue.name:""))])]),e("span",[t._v(t._s(t.$t("count")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",on:{click:function(a){return a.preventDefault(),t.addproducts()}}},[t._v("Добавить")]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("Отмена")])])]):1==t.btnChange?e("form",{staticClass:"form",attrs:{action:""}},[e("p",{staticClass:"form__title"},[e("span",[t._v("Филиал:")]),t._v(" "+t._s(t.branchValue.name))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Название:")]),t._v(" "+t._s(t.infoChange.Code)+" "+t._s(t.infoChange.Name))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Цвет:")]),t._v(" "+t._s(t.infoChange.ColorCode)+" "+t._s(t.infoChange.Color))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Кол-во:")]),t._v(" "+t._s(t.count))]),e("div",{staticClass:"count-btn"},[e("button",{staticClass:"btn btn-left bg-danger",attrs:{disabled:t.btnIsDisabled},on:{click:function(a){return a.preventDefault(),t.minus()}}},[e("i",{staticClass:"bx bx-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.countItem,expression:"countItem",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.countItem},on:{input:function(a){a.target.composing||(t.countItem=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-right bg-success",on:{click:function(a){return a.preventDefault(),t.plus()}}},[e("i",{staticClass:"bx bx-plus"})])]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:t.btnSubmitIsDisabled},on:{click:function(a){return a.preventDefault(),t.delproducts()}}},[t._v("Изменить")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("Отмена")])])]):t._e()]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.deleteMetter()}}},[e("p",[t._v("Вы уверенны что хотите удалить ?")]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ДА")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v("НЕТ")])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},sa=[],na=(e("4de4"),{name:"FinishedProduct",data:function(){return{loading:!1,modalAdd:!1,modalDelete:!1,btnChange:!1,castelmodelValue:!1,btnSubmitIsDisabled:!0,collapseActive:0,branchValue:"",branchOption:[],modelGroupValue:"",modelGroupOption:[],metter:[],modelValue:"",modelOption:[],unitValue:"",unitOption:[],infoChange:[],count:0,countItem:0,countParametrs:0,info:[],model:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.getBranches(),this.getProductGroups(),this.productTemplates()},methods:{getBranches:function(){var t=this;this.branchOption=[],f.a.get("".concat(this.api,"/branches/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.branchOption=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},getProductGroups:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/productGroups/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.modelGroupOption=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},productTemplates:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/productTemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.model=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},productsbybranch:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/productsbybranch/?branchId=").concat(this.branchValue.id),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t},addproducts:function(){var t=this;this.$v.$touch(),this.$v.branchValue.$invalid||this.$v.modelValue.$invalid||this.$v.count.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/addproducts/"),{branch:this.branchValue.id,productTemplate:this.modelValue.id,count:+this.count},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.productsbybranch()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delproducts:function(){var t=this;this.$v.$touch(),0==this.count?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(0==this.countParametrs?f.a.post("".concat(this.api,"/delproducts/"),{branch:this.branchValue.id,productTemplate:this.infoChange.productTemplateId,count:Math.abs(this.count)},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменено"),t.productsbybranch()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})):1==this.countParametrs&&(this.loading=!0,f.a.post("".concat(this.api,"/addproducts/"),{branch:this.branchValue.id,productTemplate:this.infoChange.productTemplateId,count:+this.count},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменено"),t.productsbybranch()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))),this.loading=!0)},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.text=!0,this.btnChange=!1,this.modelGroupValue="",this.modelValue="",this.count=0,this.countItem=0,this.infoChange=[],this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.infoChange=t,this.countItem=t.Count},minus:function(){this.count=this.count-1,this.countItem=this.countItem-1,this.countParametrs=0},plus:function(){this.count=this.count+1,this.countItem=this.countItem+1,this.countParametrs=1}},watch:{branchValue:function(){this.productsbybranch()},modelGroupValue:function(){var t=this;if(""!=this.modelGroupValue){var a=this.model.filter((function(a){if(t.modelGroupValue.id==a.groupId&&t.modelGroupValue.name==a.groupName)return a}));console.log(a),this.modelOption=[];for(var e=0;e<a.length;e++)this.modelOption.push({code:a[e].code,colorCode:a[e].colorCode,colorName:a[e].colorName,groupId:a[e].groupId,groupName:a[e].groupName,id:a[e].id,name:a[e].name,nameCode:a[e].code+" "+a[e].name});0==this.castelmodelValue?this.modelValue="":this.castelmodelValue=!1}},count:function(){0!=this.count?this.btnSubmitIsDisabled=!1:this.btnSubmitIsDisabled=!0},countItem:function(){0==this.countItem?this.btnIsDisabled=!0:this.btnIsDisabled=!1,this.count=this.countItem-this.infoChange.Count,-1==Math.sign(this.count)?this.countParametrs=0:1==Math.sign(this.count)&&(this.countParametrs=1)}},validations:{branchValue:{required:b["required"]},modelGroupValue:{required:b["required"]},modelValue:{required:b["required"]},count:{required:b["required"]}}}),ia=na,oa=(e("cb4d"),Object(c["a"])(ia,ea,sa,!1,null,"67fef60d",null)),la=oa.exports,ca=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"product"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("Sending"==t.$route.query.name?t.$t("Отправка"):"Reception"==t.$route.query.name?t.$t("Прием"):""))])])],1),"Sending"==t.$route.query.name?e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"SendingFinishedProduct"}}},[t._v(t._s(t.$t("Готовый продук")))])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"SendingProduct"}}},[t._v(t._s(t.$t("Материал")))])],1)])]):"Reception"==t.$route.query.name?e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"ReceptionFinishedProduct"}}},[t._v(t._s(t.$t("Готовый продук")))])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"ReceptionProduct"}}},[t._v(t._s(t.$t("Материал")))])],1)])]):t._e()])},ra=[],da={name:"Product",data:function(){return{}},methods:{}},ua=da,ma=(e("87b3"),Object(c["a"])(ua,ca,ra,!1,null,"3ff5f2de",null)),pa=ma.exports,ha=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"sendingFinishedProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Product",query:{name:"Sending"}}}},[e("i",{staticClass:"bx bx-upload"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("color")))])])],1),e("div",{staticClass:"wrapper"},[t.infoSend!=[]?e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoSend,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])]):t._e(),e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delColor()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.addColor()}}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorCode,expression:"colorCode"}],staticClass:"input",class:t.$v.colorCode.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorCode},on:{input:function(a){a.target.composing||(t.colorCode=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorCode")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorName,expression:"colorName"}],staticClass:"input",class:t.$v.colorName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorName},on:{input:function(a){a.target.composing||(t.colorName=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorName")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editColor()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeInfoModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.productTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" dona")])])}))],2)])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete||t.modalInfo,expression:"modalAdd || modalDelete || modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},fa=[],ba={name:"SendingFinishedProduct",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,modalInfo:!1,infoModal:[],colorId:"",colorCode:"",colorName:"",info:[],infoSend:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.listSendProducts()},methods:{listSendProducts:function(){var t=this;this.loading=!0,this.info=[],this.infoSend=[],f.a.get("".concat(this.api,"/listSendProducts/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++)2!=a.data[e].recvState?t.infoSend.push(a.data[e]):2==a.data[e].recvState&&t.info.push(a.data[e])})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addColor:function(){var t=this;this.$v.$touch(),this.$v.colorCode.$invalid||this.$v.colorName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/colors/"),{name:this.colorName,code:this.colorCode},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editColor:function(){var t=this;this.$v.$touch(),this.$v.colorCode.$invalid||this.$v.colorName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/colors/").concat(this.colorId,"/"),{name:this.colorName,code:this.colorCode},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delColor:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/color-delete/").concat(this.colorId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalAdd:function(){this.$router.push({name:"WRSendingAddFinishedProduct"})},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.colorCode="",this.colorName="",this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.colorId=t.id,this.colorCode=t.code,this.colorName=t.name},openModalDel:function(t){this.colorId=t,this.modalDelete=!0},openModalInfo:function(t){this.modalInfo=!0,this.infoModal=t},closeInfoModal:function(){this.modalInfo=!1,this.infoModal=[]}},validations:{colorCode:{required:b["required"]},colorName:{required:b["required"]}}},va=ba,_a=(e("6f07"),Object(c["a"])(va,ha,fa,!1,null,"40325452",null)),Ca=_a.exports,ga=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"sendingProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Product",query:{name:"Sending"}}}},[e("i",{staticClass:"bx bx-upload"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Сырье")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoSend,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.deleteItemClaim()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.addColor()}}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorCode,expression:"colorCode"}],staticClass:"input",class:t.$v.colorCode.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorCode},on:{input:function(a){a.target.composing||(t.colorCode=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorCode")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorName,expression:"colorName"}],staticClass:"input",class:t.$v.colorName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorName},on:{input:function(a){a.target.composing||(t.colorName=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorName")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editColor()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeInfoModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.productTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" dona")])])}))],2)])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete||t.modalInfo,expression:"modalAdd || modalDelete || modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},$a=[],ka={name:"SendingProduct",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,modalInfo:!1,infoModal:[],claimId:"",colorCode:"",colorName:"",info:[],infoSend:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.listSendItems()},methods:{listSendItems:function(){var t=this;this.loading=!0,this.infoSend=[],f.a.get("".concat(this.api,"/listSendItems/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoSend=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},editColor:function(){var t=this;this.$v.$touch(),this.$v.colorCode.$invalid||this.$v.colorName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/colors/").concat(this.colorId,"/"),{name:this.colorName,code:this.colorCode},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},deleteItemClaim:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/deleteItemClaim/?id=").concat(this.claimId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalAdd:function(){this.$router.push({name:"SendingAddProduct"})},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.colorCode="",this.colorName="",this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.claimId=t.id,this.colorCode=t.code,this.colorName=t.name},openModalDel:function(t){this.claimId=t,this.modalDelete=!0},openModalInfo:function(t){this.modalInfo=!0,this.infoModal=t},closeInfoModal:function(){this.modalInfo=!1,this.infoModal=[]}},validations:{colorCode:{required:b["required"]},colorName:{required:b["required"]}}},ya=ka,wa=(e("e1e7"),Object(c["a"])(ya,ga,$a,!1,null,"479fe6c1",null)),Aa=wa.exports,Ma=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"SendingAddProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("div",{staticClass:"breadcrumb__item"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"SendingProduct"}}},[e("i",{staticClass:"fa fa-angle-left"}),e("p",[t._v(t._s(t.$t("back")))])])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12 mb-3"},[e("div",{staticClass:"filter-card"},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{"deselect-label":"Невозможно удалить","allow-empty":!1,label:"name","track-by":"id",options:t.branchOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}}),e("span",[t._v("Филиал")])],1)])])]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("count")))]),e("p",{staticClass:"w-3"})]),e("div",{staticClass:"table-custom__body"},[t._l(t.sendInfo,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.itemTemplateName))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.count)+" "+t._s(a.unit))]),e("div",{staticClass:"w-3 btns"},[e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.delMetter(a.itemTemplate)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0!=t.sendInfo.length?e("div",{staticClass:"btn btn-success w-100 mt-3 p-2",on:{click:function(a){return t.createItemClaim()}}},[t._v(t._s(t.$t("Отправить")))]):t._e()],2)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.metterGroupOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterGroupValue,callback:function(a){t.metterGroupValue=a},expression:"metterGroupValue"}}),e("span",[t._v(t._s(t.$t("groupMatter")))])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.metterOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterValue,callback:function(a){t.metterValue=a},expression:"metterValue"}}),e("span",[t._v(t._s(t.$t("matter")))])],1),e("div",{staticClass:"name count"},[e("div",{staticClass:"position-relative",class:t.$v.count.$error?"is-invalid":""},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"input",attrs:{id:"count",type:"number",autocomplete:"off"},domProps:{value:t.count},on:{input:function(a){a.target.composing||(t.count=a.target.value)}}}),e("p",[t._v(t._s(""!=t.unitValue?t.unitValue.name:""))])]),e("span",[t._v(t._s(t.$t("count")))])]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addMetter()}}},[t._v(t._s(t.$t("add")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Ia=[],xa={name:"SendingAddProduct",data:function(){return{loading:!1,modalAdd:!1,castelmetterValue:!1,branchValue:[],branchOption:[],metterGroupValue:"",metterGroupOption:[],metterValue:"",metterOption:[],metter:[],unitValue:"",unitOption:[],count:"",info:[],sendInfo:[],ItemClaim:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.getBranches(),this.getMetterGroups()},methods:{getBranches:function(){var t=this;this.loading=!0,this.branchOption=[],f.a.get("".concat(this.api,"/branches/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.branchOption=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},getMetterGroups:function(){var t=this;this.metterGroupOption=[],f.a.get("".concat(this.api,"/itemgroups/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++){var s={id:a.data[e].id,name:a.data[e].name,list:[]};t.metter.push(s)}for(var n=0;n<a.data.length;n++){var i={code:a.data[n].id,name:a.data[n].name};t.metterGroupOption.push(i)}t.getMetter()})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},getMetter:function(){var t=this;f.a.get("".concat(this.api,"/itemTemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<t.metter.length;e++)for(var s=0;s<a.data.length;s++)t.metter[e].id==a.data[s].group&&t.metter[e].list.push(a.data[s]);t.getUnits()})).catch((function(t){return console.log(t)}))},getUnits:function(){var t=this;f.a.get("".concat(this.api,"/units/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.unitOption=a.data})).catch((function(t){return console.log(t)}))},addMetter:function(){this.$v.$touch(),this.$v.metterGroupValue.$invalid||this.$v.metterValue.$invalid||this.$v.count.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.sendInfo.push({itemTemplateName:this.metterValue.name,itemTemplate:this.metterValue.id,count:+this.count,unit:this.unitValue.name}),this.closeModalAdd())},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.metterGroupValue="",this.metterValue="",this.count="",this.unitValue="",this.$v.$reset()},delMetter:function(t){this.sendInfo=this.sendInfo.filter((function(a){return a.itemTemplate!=t}))},createItemClaim:function(){var t=this;if(this.$v.$touch(),this.$v.branchValue.$invalid&&0!=this.sendInfo.length)this.$toast.open({message:"Ввидите данные правильно",type:"error"});else{this.loading=!0;var a={sendToBranchId:this.branchValue.id,sentToBranchName:this.branchValue.name,items:this.ItemClaim};f.a.post("".concat(this.api,"/createItemClaim/"),a,{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Отправленно"),setTimeout((function(){t.$router.push({name:"SendingProduct"})}),2e3)):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))}}},watch:{metterGroupValue:function(){var t=this;if(this.metterOption=[],""!=this.metterGroupValue){var a=this.metter.find((function(a){if(a.id==t.metterGroupValue.code)return a}));this.metterOption=a.list,0==this.castelmetterValue?this.metterValue="":this.castelmetterValue=!1}},metterValue:function(){var t=this;""!=this.metterValue&&(this.unitValue=this.unitOption.find((function(a){if(a.id==t.metterValue.unit)return a})))},sendInfo:function(){this.ItemClaim=[];for(var t=0;t<this.sendInfo.length;t++)this.ItemClaim.push({itemTemplate:this.sendInfo[t].itemTemplate,count:this.sendInfo[t].count})}},validations:{branchValue:{required:b["required"]},metterGroupValue:{required:b["required"]},metterValue:{required:b["required"]},count:{required:b["required"]}}},Na=xa,Da=(e("1df3"),Object(c["a"])(Na,Ma,Ia,!1,null,"2f4d8696",null)),Va=Da.exports,Ta=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"ReceptionFinishedProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Product",query:{name:"Reception"}}}},[e("i",{staticClass:"bx bx-upload"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("color")))])])],1),e("div",{staticClass:"wrapper"},[t.infoSend!=[]?e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoSend,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])]):t._e(),e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delColor()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.addColor()}}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorCode,expression:"colorCode"}],staticClass:"input",class:t.$v.colorCode.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorCode},on:{input:function(a){a.target.composing||(t.colorCode=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorCode")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorName,expression:"colorName"}],staticClass:"input",class:t.$v.colorName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorName},on:{input:function(a){a.target.composing||(t.colorName=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorName")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editColor()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeInfoModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.productTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" dona")])])}))],2)])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete||t.modalInfo,expression:"modalAdd || modalDelete || modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Sa=[],Pa={name:"ReceptionFinishedProduct",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,modalInfo:!1,infoModal:[],colorId:"",colorCode:"",colorName:"",info:[],infoSend:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.listSendProducts()},methods:{listSendProducts:function(){var t=this;this.loading=!0,this.info=[],this.infoSend=[],f.a.get("".concat(this.api,"/listSendProducts/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++)2!=a.data[e].recvState?t.infoSend.push(a.data[e]):2==a.data[e].recvState&&t.info.push(a.data[e])})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addColor:function(){var t=this;this.$v.$touch(),this.$v.colorCode.$invalid||this.$v.colorName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/colors/"),{name:this.colorName,code:this.colorCode},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editColor:function(){var t=this;this.$v.$touch(),this.$v.colorCode.$invalid||this.$v.colorName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/colors/").concat(this.colorId,"/"),{name:this.colorName,code:this.colorCode},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delColor:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/color-delete/").concat(this.colorId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getColor()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalAdd:function(){this.$router.push({name:"WRSendingAddFinishedProduct"})},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.colorCode="",this.colorName="",this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.colorId=t.id,this.colorCode=t.code,this.colorName=t.name},openModalDel:function(t){this.colorId=t,this.modalDelete=!0},openModalInfo:function(t){this.modalInfo=!0,this.infoModal=t},closeInfoModal:function(){this.modalInfo=!1,this.infoModal=[]}},validations:{colorCode:{required:b["required"]},colorName:{required:b["required"]}}},Ga=Pa,Oa=(e("09b2"),Object(c["a"])(Ga,Ta,Sa,!1,null,"5acf796a",null)),Ra=Oa.exports,Ya=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modelsItem"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Dashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"Product",query:{name:"Reception"}}}},[e("i",{staticClass:"bx bx-window-open"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Сырье")))])])],1),e("div",{staticClass:"wrapper"},[t.infoAcceptItems!=[]?e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoAcceptItems,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])]):t._e(),e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoAcceptItemClaim,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delComponent()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.metterGroupOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterGroupValue,callback:function(a){t.metterGroupValue=a},expression:"metterGroupValue"}}),e("span",[t._v(t._s(t.$t("groupMatter")))])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"name","track-by":"code",options:t.metterOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.metterValue,callback:function(a){t.metterValue=a},expression:"metterValue"}}),e("span",[t._v(t._s(t.$t("matter")))])],1),e("div",{staticClass:"name count"},[e("div",{staticClass:"position-relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"input",class:t.$v.count.$error?"is-invalid":"",attrs:{id:"count",type:"number",autocomplete:"off"},domProps:{value:t.count},on:{input:function(a){a.target.composing||(t.count=a.target.value)}}}),e("p",[t._v(t._s(""!=t.unit?t.unit.name:""))])]),e("span",[t._v(t._s(t.$t("count")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addItempurchase()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editItempurchase()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Ba=[],qa={name:"ModelsItem",data:function(){return{loading:!1,modalAdd:!1,modalDelete:!1,btnChange:!1,info:[],metter:[],units:[],unit:"",metterGroupValue:"",metterGroupOption:[],metterValue:"",metterOption:[],metterAll:[],infoAcceptItems:[],infoAcceptItemClaim:[],count:"",castelmetterValue:!1,token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.listAcceptItems(),this.acceptItemClaim(),this.getMetterGroups()},methods:{listAcceptItems:function(){var t=this;this.infoAcceptProducts=[],f.a.get("".concat(this.api,"/listAcceptItems/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoAcceptItems=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},acceptItemClaim:function(){var t=this;this.infoAcceptProducts=[],f.a.get("".concat(this.api,"/acceptItemClaim/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoAcceptItemClaim=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},getMetterGroups:function(){var t=this;this.metterGroupOption=[],f.a.get("".concat(this.api,"/itemgroups/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<a.data.length;e++){var s={id:a.data[e].id,name:a.data[e].name,list:[]};t.metter.push(s)}for(var n=0;n<a.data.length;n++){var i={code:a.data[n].id,name:a.data[n].name};t.metterGroupOption.push(i)}t.getMetter()})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},getMetter:function(){var t=this;f.a.get("".concat(this.api,"/itemTemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<t.metter.length;e++)for(var s=0;s<a.data.length;s++)t.metter[e].id==a.data[s].group&&t.metter[e].list.push(a.data[s]);t.metterAll=a.data,t.getUnits()})).catch((function(t){return console.log(t)}))},getUnits:function(){var t=this;f.a.get("".concat(this.api,"/units/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.units=a.data})).catch((function(t){return console.log(t)}))},addItempurchase:function(){var t=this;this.$v.$touch(),this.$v.metterGroupValue.$invalid||this.$v.metterValue.$invalid||this.$v.count.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/itempurchase/"),{itemTemplate:this.metterValue.id,count:this.count},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?t.$toast.success("Добавленно"):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editComponents:function(){var t=this;this.$v.$touch(),this.$v.metterGroupValue.$invalid||this.$v.metterValue.$invalid||this.$v.count.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/components/").concat(this.componentId,"/"),{productTemplate:this.$route.params.id,itemTemplate:this.metterValue.id,count:this.count},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getComponents()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},delComponent:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/component-delete/").concat(this.componentId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.getComponents()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalDel:function(t){this.componentId=t,this.modalDelete=!0},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.componentId="",this.metterGroupValue="",this.metterValue="",this.count="",this.unit="",this.$v.$reset()},changeModalAdd:function(t){var a=this;this.modalAdd=!0,this.btnChange=!0,this.text=!1,this.componentId=t.id,this.count=t.count,this.castelmetterValue=!0,this.metterValue=this.metterAll.find((function(a){if(a.id==t.itemTemplate)return a})),this.metterGroupValue=this.metterGroupOption.find((function(t){if(t.code==a.metterValue.group)return t}))}},watch:{metterGroupValue:function(){var t=this;if(this.metterOption=[],""!=this.metterGroupValue){var a=this.metter.find((function(a){if(a.id==t.metterGroupValue.code)return a}));this.metterOption=a.list,0==this.castelmetterValue?this.metterValue="":this.castelmetterValue=!1}},metterValue:function(){var t=this;""!=this.metterValue&&(this.unit=this.units.find((function(a){if(a.id==t.metterValue.unit)return a})))}},validations:{metterGroupValue:{required:b["required"]},metterValue:{required:b["required"]},count:{required:b["required"]}}},Ua=qa,ja=(e("aa2d"),Object(c["a"])(Ua,Ya,Ba,!1,null,"50d98b64",null)),za=ja.exports,Wa=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRDashboard"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Цех")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BRRawMaterial"}}},[t._v(" "+t._s(t.$t("Сырье"))+" ")])],1)])])])},La=[],Fa={name:"BRDashboard",data:function(){return{}},methods:{}},Ea=Fa,Ha=(e("77ce"),Object(c["a"])(Ea,Wa,La,!1,null,"3b6ad546",null)),Ja=Ha.exports,Ka=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"BRRawMaterial"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bxs-cylinder"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("Сырье"))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.index,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.name)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.name)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.name?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.name?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.items.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Код")]),e("p",{staticClass:"w-3"},[t._v("Название")]),e("p",{staticClass:"w-4"},[t._v("Цвет")]),e("p",{staticClass:"w-5"},[t._v("Кол.")])]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.items,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.Code))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.Name))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.ColorCode)+" "+t._s(a.Color))]),e("p",{staticClass:"w-5"},[t._v(t._s(a.Count)+" "+t._s(a.Unit))])])}))],2)]):t._e()])],1)})),0)])]),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Qa=[],Xa={name:"BRRawMaterial",data:function(){return{loading:!1,collapseActive:"",info:[],token:"",auth:[],api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=JSON.parse(sessionStorage.getItem("auth")),this.itemsbybranch()},methods:{itemsbybranch:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/itemsbybranch/?branchId=").concat(this.auth.branchId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t}},watch:{metterGroupValue:function(){var t=this;if(this.metterOption=[],""!=this.metterGroupValue){var a=this.metter.find((function(a){if(a.id==t.metterGroupValue.id)return a}));this.metterOption=a.list,0==this.castelmetterValue?this.metterValue="":this.castelmetterValue=!1}},metterValue:function(){var t=this;""!=this.metterValue&&(this.unitValue=this.unitOption.find((function(a){if(a.id==t.metterValue.unit)return a})))}},validations:{metterGroupValue:{required:b["required"]},metterValue:{required:b["required"]},count:{required:b["required"]}}},Za=Xa,te=(e("6f96"),Object(c["a"])(Za,Ka,Qa,!1,null,"05a6c494",null)),ae=te.exports,ee=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"add"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("payList")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BRAcceptanceFinishedProducts"}}},[t._v(" "+t._s(t.$t("Приём готовый продукции"))+" ")])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BRFine"}}},[t._v(" "+t._s(t.$t("Штраф"))+" ")])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BRPay"}}},[t._v(" "+t._s(t.$t("Зарплата"))+" ")])],1)])])])},se=[],ne={name:"BRAdd",data:function(){return{}},methods:{}},ie=ne,oe=(e("d24f"),Object(c["a"])(ie,ee,se,!1,null,"33c96f1e",null)),le=oe.exports,ce=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"BRAcceptanceFinishedProducts"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRPayList"}}},[e("i",{staticClass:"bx bx-money"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Приём готовый продукции")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.id,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.id)}}},[e("p",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.id?"bxs-down-arrow":"bxs-right-arrow"]}),t._v(" "+t._s(a.name))]),e("div",{staticClass:"btns"})]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.id?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.list.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("Дата")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("Наз. Работ.")))]),e("p",{staticClass:"w-4"},[t._v(t._s(t.$t("Количество")))]),e("p",{staticClass:"w-5"},[t._v(t._s(t.$t("Оплата")))]),e("p",{staticClass:"w-6"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.list,(function(a,s){return e("div",{key:a.index,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.date))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.jobTitle))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.count))]),e("p",{staticClass:"w-5"},[e("span",{staticClass:"span-btn",class:a.paid?"green":"red"},[t._v(t._s(a.paid?"Оплаченно":"Не оплаченно"))])]),e("div",{staticClass:"w-6 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])}))],2)]):t._e()])],1)})),0)])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("span",[t._v(t._s(t.$t("employes")))]),e("multiselect",{class:t.$v.employesValue.$error?"is-invalid":"",attrs:{disabled:!!t.btnChange,placeholder:"",label:"name","track-by":"id",options:t.employesOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.employesValue,callback:function(a){t.employesValue=a},expression:"employesValue"}})],1),e("div",{staticClass:"selects"},[e("span",[t._v(t._s(t.$t("worktemplates")))]),e("multiselect",{class:t.$v.worktemplatesValue.$error?"is-invalid":"",attrs:{disabled:!!t.btnChange,placeholder:"",label:"name","track-by":"id",options:t.worktemplatesOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.worktemplatesValue,callback:function(a){t.worktemplatesValue=a},expression:"worktemplatesValue"}})],1),e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("count")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.countWork,expression:"countWork"}],staticClass:"input",class:t.$v.countWork.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.countWork},on:{input:function(a){a.target.composing||(t.countWork=a.target.value)}}})]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addWorks()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editWorks()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delWork()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},re=[],de={name:"BRAcceptanceFinishedProducts",data:function(){return{loading:!1,modalDelete:!1,modalAdd:!1,btnChange:!1,collapseActive:0,info:[],employesOptions:[],employesValue:"",worktemplatesOptions:[],worktemplatesValue:"",paid:"",countWork:"",workId:"",api:"",token:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.employes(),this.worktemplates()},methods:{works:function(){var t=this;f.a.get("".concat(this.api,"/works/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<t.info.length;e++)for(var s=0;s<a.data.length;s++)t.info[e].id==a.data[s].employe&&t.info[e].list.push(a.data[s])})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},employes:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/employes/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.employesOptions=a.data;for(var e=0;e<a.data.length;e++){t.info.push({branch:a.data[e].branch,department:a.data[e].department,id:a.data[e].id,jobTitle:a.data[e].jobTitle,name:a.data[e].name,list:[]});var s=e+1;a.data.length==s&&setTimeout((function(){t.works()}),3e3)}})).catch((function(t){return console.log(t)})).finally((function(){}))},worktemplates:function(){var t=this;f.a.get("".concat(this.api,"/worktemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.worktemplatesOptions=a.data})).catch((function(t){return console.log(t)})).finally((function(){}))},addWorks:function(){var t=this;this.$v.$touch(),this.$v.employesValue.$invalid&&this.$v.worktemplatesValue.$invalid&&this.$v.countWork.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/works/"),{employe:this.employesValue.id,work_template:this.worktemplatesValue.id,count:this.countWork},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.employes(),t.closeModalAdd()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){})))},delWork:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/work-delete/").concat(this.workId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.modalDelete=!1,t.employes()):(t.$toast.error(a.data.msg),t.loading=!1)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)}))},editWorks:function(){var t=this;this.$v.$touch(),this.$v.employesValue.$invalid&&this.$v.worktemplatesValue.$invalid&&this.$v.countWork.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/works/").concat(this.workId,"/"),{count:this.countWork,paid:this.paid,work_template:this.worktemplatesValue.id,employe:this.employesValue.id},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.employes()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()})))},openModalDel:function(t){this.workId=t,this.modalDelete=!0},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t},openModalAdd:function(){this.modalAdd=!0},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.worktemplatesValue=this.worktemplatesOptions.find((function(a){if(a.id==t.work_template)return a})),this.countWork=t.count,this.employesValue=this.employesOptions.find((function(a){if(a.id==t.employe)return a})),this.paid=t.paid,this.workId=t.id},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.employesValue=[],this.worktemplatesValue=[],this.countWork="",this.workId="",this.$v.$reset()}},validations:{employesValue:{required:b["required"]},worktemplatesValue:{required:b["required"]},countWork:{required:b["required"]}}},ue=de,me=(e("10cf"),Object(c["a"])(ue,ce,re,!1,null,"72e83948",null)),pe=me.exports,he=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"BRFine"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRPayList"}}},[e("i",{staticClass:"bx bx-money"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Штраф")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.id,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.id)}}},[e("p",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.id?"bxs-down-arrow":"bxs-right-arrow"]}),t._v(" "+t._s(a.name))]),e("div",{staticClass:"btns"})]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.id?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.list.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("Дата")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("Наз. штрафа")))]),e("p",{staticClass:"w-4"},[t._v(t._s(t.$t("Штраф(сум)")))]),e("p",{staticClass:"w-5"},[t._v(t._s(t.$t("")))]),e("p",{staticClass:"w-6"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.list,(function(a,s){return e("div",{key:a.index,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.date))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.name))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.price))]),e("p",{staticClass:"w-5"},[e("span",{staticClass:"span-btn",class:a.paid?"green":"red"},[t._v(t._s(a.paid?"-":"+"))])]),e("div",{staticClass:"w-6 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])}))],2)]):t._e()])],1)})),0)])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("span",[t._v(t._s(t.$t("employes")))]),e("multiselect",{class:t.$v.employesValue.$error?"is-invalid":"",attrs:{disabled:!!t.btnChange,placeholder:"",label:"name","track-by":"id",options:t.employesOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.employesValue,callback:function(a){t.employesValue=a},expression:"employesValue"}})],1),e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("name")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.namePenalties,expression:"namePenalties"}],staticClass:"input",class:t.$v.namePenalties.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.namePenalties},on:{input:function(a){a.target.composing||(t.namePenalties=a.target.value)}}})]),e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("price")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pricePenalties,expression:"pricePenalties"}],staticClass:"input",class:t.$v.pricePenalties.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.pricePenalties},on:{input:function(a){a.target.composing||(t.pricePenalties=a.target.value)}}})]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addPenalties()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editPenalties()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delPenalties()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},fe=[],be={name:"BRFine",data:function(){return{loading:!1,modalDelete:!1,modalAdd:!1,btnChange:!1,collapseActive:0,info:[],employesOptions:[],employesValue:"",namePenalties:"",paid:"",pricePenalties:"",penaltiesId:"",api:"",token:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.employes()},methods:{penalties:function(){var t=this;f.a.get("".concat(this.api,"/penalties/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){for(var e=0;e<t.info.length;e++)for(var s=0;s<a.data.length;s++)t.info[e].id==a.data[s].employe&&t.info[e].list.push(a.data[s])})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},employes:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/employes/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.employesOptions=a.data;for(var e=0;e<a.data.length;e++){t.info.push({branch:a.data[e].branch,department:a.data[e].department,id:a.data[e].id,jobTitle:a.data[e].jobTitle,name:a.data[e].name,list:[]});var s=e+1;a.data.length==s&&setTimeout((function(){t.penalties()}),3e3)}})).catch((function(t){return console.log(t)})).finally((function(){}))},addPenalties:function(){var t=this;this.$v.$touch(),this.$v.employesValue.$invalid&&this.$v.namePenalties.$invalid&&this.$v.pricePenalties.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/penalties/"),{employe:this.employesValue.id,name:this.namePenalties,price:this.pricePenalties},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.employes(),t.closeModalAdd()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){})))},delPenalties:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/penalty-delete/").concat(this.penaltiesId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.modalDelete=!1,t.employes()):(t.$toast.error(a.data.msg),t.loading=!1)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)}))},editPenalties:function(){var t=this;this.$v.$touch(),this.$v.employesValue.$invalid&&this.$v.namePenalties.$invalid&&this.$v.pricePenalties.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/penalties/").concat(this.penaltiesId,"/"),{employe:this.employesValue.id,name:this.namePenalties,price:this.pricePenalties},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.employes()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()})))},openModalDel:function(t){this.penaltiesId=t,this.modalDelete=!0},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t},openModalAdd:function(){this.modalAdd=!0},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.pricePenalties=t.price,this.namePenalties=t.name,this.employesValue=this.employesOptions.find((function(a){if(a.id==t.employe)return a})),this.paid=t.paid,this.penaltiesId=t.id},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.employesValue=[],this.worktemplatesValue=[],this.countWork="",this.penaltiesId="",this.$v.$reset()}},validations:{employesValue:{required:b["required"]},namePenalties:{required:b["required"]},pricePenalties:{required:b["required"]}}},ve=be,_e=(e("b879"),Object(c["a"])(ve,he,fe,!1,null,"200a8c85",null)),Ce=_e.exports,ge=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"brPay"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRPayList"}}},[e("i",{staticClass:"bx bx-money"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Зарплата")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.employeId,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.employeId)}}},[e("p",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.employeId?"bxs-down-arrow":"bxs-right-arrow"]}),t._v(" "+t._s(a.employeName))]),e("div",{staticClass:"btns"})]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.employeId?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.works.length?e("div",{staticClass:"custom-table__body-head"},[e("p",[t._v(t._s(t.$t("Зар. плата")))])]):t._e(),0!=a.works.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("Дата")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("Наз. Работ.")))]),e("p",{staticClass:"w-4"},[t._v(t._s(t.$t("Количество")))]),e("p",{staticClass:"w-5"},[t._v(t._s(t.$t("Ст. за ед.")))]),e("p",{staticClass:"w-6"},[t._v(t._s(t.$t("ЗП")))])]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.works,(function(a,s){return e("div",{key:a.index,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.date))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.work_name))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.count))]),e("p",{staticClass:"w-5"},[t._v(t._s(a.pricePerOne))]),e("p",{staticClass:"w-6"},[t._v(t._s(a.price))])])})),0!=a.penalties.length?e("div",{staticClass:"custom-table__body-head"},[e("p",[t._v("Штрафы")])]):t._e(),t._l(a.penalties,(function(a,s){return e("div",{key:a.index,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.date))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.penaltyName))]),e("p",{staticClass:"w-4"}),e("p",{staticClass:"w-5"}),e("p",{staticClass:"w-6"},[t._v("-"+t._s(a.price))])])})),0!=a.to_paid?e("div",{staticClass:"custom-table__body-total"},[e("p",[t._v(t._s(t.$t("Общий ЗП"))+": ")]),e("p",{staticClass:"w-6"},[t._v(t._s(a.to_paid))])]):t._e(),0!=a.to_subtract?e("div",{staticClass:"custom-table__body-total"},[e("p",[t._v(t._s(t.$t("Общий Штраф"))+": ")]),e("p",{staticClass:"w-6"},[t._v("-"+t._s(a.to_subtract))])]):t._e(),0!=a.total_to_paid?e("div",{staticClass:"custom-table__body-total"},[e("p",[t._v(t._s(t.$t("ИТОГО"))+": ")]),e("p",{staticClass:"w-6"},[t._v(t._s(a.total_to_paid))])]):t._e(),0!=a.total_to_paid?e("div",{staticClass:"custom-table__body-total"},[e("button",{staticClass:"w-6 btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.openModalPaid(a.employeId)}}},[t._v(t._s(t.$t("Оплатить")))])]):t._e()],2)]):t._e()])],1)})),0)])]),t.modalPaid?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.paid()}}},[e("p",[t._v(t._s(t.$t("textPaid")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalPaid=!t.modalPaid}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalPaid,expression:"modalPaid"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},$e=[],ke={name:"BRPay",data:function(){return{employeId:"",loading:!1,modalPaid:!1,madalParams:1,collapseActive:0,info:[],api:"",token:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.salary()},methods:{openModalPaid:function(t){this.employeId=t,this.modalPaid=!0},salary:function(){var t=this;this.productTemplatesColorOption=[],f.a.get("".concat(this.api,"/salary/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t},paid:function(){var t=this;this.loading=!0,f.a.get("".concat(this.api,"/paidout/?employeId=").concat(this.employeId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){0==a.data.code?(t.$toast.success("Оплаченно"),t.salary()):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)}))}},validations:{productGroupName:{required:b["required"]},productTemplatesName:{required:b["required"]},productGroupValue:{required:b["required"]},productTemplatesCode:{required:b["required"]},productTemplatesColorValue:{required:b["required"]},employesName:{required:b["required"]},employesJobTitle:{required:b["required"]},branchValue:{required:b["required"]}}},ye=ke,we=(e("e4d2"),Object(c["a"])(ye,ge,$e,!1,null,"04c1af9a",null)),Ae=we.exports,Me=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"add"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("add")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BREmployes"}}},[t._v(" "+t._s(t.$t("employes"))+" ")])],1),e("div",{staticClass:"col-xl-3"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BRWorktemplates"}}},[t._v(" "+t._s(t.$t("worktemplates"))+" ")])],1)])])])},Ie=[],xe={name:"BRAdd",data:function(){return{}},methods:{}},Ne=xe,De=(e("f4ab"),Object(c["a"])(Ne,Me,Ie,!1,null,"1b48f6f4",null)),Ve=De.exports,Te=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"BREmployes"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRAdd"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("employes"))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.id,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__item"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.id)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.name)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.id?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.id?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.list.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("ФИО")]),e("p",{staticClass:"w-3"},[t._v("Работа")]),e("p",{staticClass:"w-4"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.list,(function(a,s){return e("div",{key:a.id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.name))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.jobTitle))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(1,a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(1,a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])}))],2)]):t._e()])],1)])})),0)])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[t.text?e("div",{staticClass:"text"},[e("p",{class:[1==t.madalParams?"active":""],on:{click:function(a){t.madalParams=1}}},[t._v(t._s(t.$t("employes")))]),e("p",{class:[2==t.madalParams?"active":""],on:{click:function(a){t.madalParams=2}}},[t._v(t._s(t.$t("employesGroup")))])]):t._e(),1==t.madalParams?e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("span",[t._v(t._s(t.$t("groups")))]),e("multiselect",{attrs:{placeholder:"",label:"name","track-by":"id",options:t.departmentOptions,multiple:!1,taggable:!1,searchable:!1},model:{value:t.departmentValue,callback:function(a){t.departmentValue=a},expression:"departmentValue"}})],1),e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("name")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.employesName,expression:"employesName"}],staticClass:"input",class:t.$v.employesName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.employesName},on:{input:function(a){a.target.composing||(t.employesName=a.target.value)}}})]),e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("job")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.employesJobTitle,expression:"employesJobTitle"}],staticClass:"input",class:t.$v.employesJobTitle.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.employesJobTitle},on:{input:function(a){a.target.composing||(t.employesJobTitle=a.target.value)}}})]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addEmployes()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editEmployes()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])]):t._e(),2==t.madalParams?e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.$t("nameGroup")))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.employesName,expression:"employesName"}],staticClass:"input",class:t.$v.employesName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.employesName},on:{input:function(a){a.target.composing||(t.employesName=a.target.value)}}})]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addDepartment()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editDepartments()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])]):t._e()]):t._e(),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delEmploye()}}},[e("p",[t._v("Вы уверенны что хотите удалить ?")]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("ДА")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v("НЕТ")])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Se=[],Pe={name:"BREmployes",data:function(){return{loading:!1,info:[],collapseActive:0,collapseDownActive:0,modalAdd:!1,modalDelete:!1,madalParams:1,btnChange:!1,text:!0,employesId:"",employesName:"",employesJobTitle:"",branchValue:"",branchOptions:[],branchType:[{code:1,name:"Цех"},{code:2,name:this.$t("shop")},{code:3,name:this.$t("store")}],departmentValue:"",departmentOptions:[],departmentsId:"",token:"",auth:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=JSON.parse(sessionStorage.getItem("auth")),this.loading=!0,this.getGropus()},methods:{getGropus:function(){var t=this;this.departmentOptions=[],this.info=[],f.a.get("".concat(this.api,"/departments/?branch=").concat(this.auth.branchId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){if(a.data!=[])for(var e=0;e<a.data.length;e++){t.info.push({id:a.data[e].id,branch:a.data[e].branch,name:a.data[e].name,list:[]}),t.departmentOptions.push(a.data[e]);var s=e+1;a.data.length==s&&setTimeout((function(){t.getDepartment()}),2e3)}})).catch((function(a){console.log(a),401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("auth",""),t.$router.push({name:"Auth"}))}))},getDepartment:function(){for(var t=this,a=function(a){f.a.get("".concat(t.api,"/employes/?department=").concat(t.info[a].id),{headers:{Authorization:"Token ".concat(t.token)}}).then((function(e){if(e.data!=[])for(var s=0;s<e.data.length;s++)t.info[a].list.push(e.data[s])})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)}))},e=0;e<this.info.length;e++)a(e);setTimeout((function(){t.closeModalAdd(),t.loading=!1}),3e3)},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t},addEmployes:function(){var t=this;this.$v.$touch(),this.$v.employesName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/employes/"),{name:this.employesName,jobTitle:this.employesJobTitle,branch:this.auth.branchId,department:this.departmentValue.id||null},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getGropus()):(t.$toast.error(a.data.msg),t.closeModalAdd())})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){})))},editEmployes:function(){var t=this;this.$v.$touch(),this.$v.employesName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/employes/").concat(this.employesId,"/"),{name:this.employesName,jobTitle:this.employesJobTitle,branch:this.auth.branchId,department:this.departmentValue.id||null},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getGropus()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()})))},delEmploye:function(){var t=this;this.loading=!0,this.collapseActive=0,1==this.madalParams?f.a.delete("".concat(this.api,"/employe-delete/").concat(this.employesId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.modalDelete=!1,t.getGropus()):(t.$toast.error(a.data.msg),t.closeModalAdd(),t.loading=!1)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){})):f.a.delete("".concat(this.api,"/department-delete/").concat(this.departmentsId,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.modalDelete=!1,t.getGropus()):(t.$toast.error(a.data.msg),t.loading=!1)})).catch((function(a){401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){}))},addDepartment:function(){var t=this;this.$v.$touch(),this.$v.employesName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.post("".concat(this.api,"/departments/"),{name:this.employesName,branch:this.auth.id},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Добавленно"),t.getGropus()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1})))},editDepartments:function(){var t=this;this.$v.$touch(),this.$v.employesName.$invalid?this.$toast.open({message:"Ввидите данные правильно",type:"error"}):(this.loading=!0,f.a.put("".concat(this.api,"/departments/").concat(this.departmentsId,"/"),{name:this.employesName,branch:this.auth.branchId},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Изменнено"),t.getGropus()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd()})))},openModalDel:function(t,a){switch(t){case 1:this.employesId=a,this.madalParams=1;break;case 2:this.departmentsId=a,this.madalParams=2;break}this.modalDelete=!0},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.employesId="",this.employesName="",this.branchValue="",this.employesJobTitle="",this.departmentValue=[],this.department=!1,this.text=!0,this.madalParams=1,this.$v.$reset()},changeModalAdd:function(t,a){switch(this.modalAdd=!0,this.btnChange=!0,this.text=!1,t){case 1:this.employesId=a.id,this.employesName=a.name,this.employesJobTitle=a.jobTitle,this.departmentValue=this.departmentOptions.find((function(t){if(t.id==a.department)return t})),this.madalParams=1;break;case 2:this.departmentsId=a.id,this.employesName=a.name,this.madalParams=2;break}}},watch:{},validations:{employesName:{required:b["required"]},employesJobTitle:{required:b["required"]}}},Ge=Pe,Oe=(e("7786"),Object(c["a"])(Ge,Te,Se,!1,null,"f8290566",null)),Re=Oe.exports,Ye=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"worktemplates"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRAdd"}}},[e("i",{staticClass:"bx bxs-layer-plus"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("worktemplates")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("pricePerOne")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a,s){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.name))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.pricePerOne)+" sum")]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[e("i",{staticClass:"bx bx-edit"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delWorktemplates()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.clear()}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.nameWorktemplates,expression:"nameWorktemplates"}],staticClass:"input",class:t.$v.nameWorktemplates.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.nameWorktemplates},on:{input:function(a){a.target.composing||(t.nameWorktemplates=a.target.value)}}}),e("span",[t._v(t._s(t.$t("name")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.priceWorktemplates,expression:"priceWorktemplates"}],staticClass:"input",class:t.$v.priceWorktemplates.$error?"is-invalid":"",attrs:{type:"number"},domProps:{value:t.priceWorktemplates},on:{input:function(a){a.target.composing||(t.priceWorktemplates=a.target.value)}}}),e("span",[t._v(t._s(t.$t("price")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addWorktemplates()}}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editWorktemplates()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.clear()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete,expression:"modalAdd || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Be=[],qe={name:"Worktemplates",data:function(){return{info:[],nameWorktemplates:"",priceWorktemplates:"",idWorktemplates:"",btnChange:!1,modalDelete:!1,modalAdd:!1,loading:!1,token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loadWorktemplates()},methods:{loadWorktemplates:function(){var t=this;this.loading=!0,f.a.get("".concat(this.api,"/worktemplates/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addWorktemplates:function(){var t=this;this.$v.$touch(),this.$v.$invalid||(this.loading=!0,f.a.post("".concat(this.api,"/worktemplates/"),{name:this.nameWorktemplates,pricePerOne:this.priceWorktemplates},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?t.$toast.success("Добленно"):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.loadWorktemplates(),t.clear()})))},delWorktemplates:function(){var t=this;this.loading=!0,f.a.delete("".concat(this.api,"/worktemplate-delete/").concat(this.idWorktemplates,"/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?t.$toast.success("Удалено"):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.loadWorktemplates(),t.clear()}))},editWorktemplates:function(){var t=this;this.$v.$touch(),this.$v.$invalid||(this.loading=!0,f.a.put("".concat(this.api,"/worktemplates/"),{name:this.nameWorktemplates,pricePerOne:this.priceWorktemplates},{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?t.$toast.success("Изменино"):"Ok"!=a.data.msg&&t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.loadWorktemplates(),t.clear()})))},openModalAdd:function(){this.modalAdd=!0,this.btnChange=!1},clear:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.nameWorktemplates="",this.priceWorktemplates="",this.idWorktemplates="",this.$v.$reset()},openModalDel:function(t){this.idWorktemplates=t,this.modalDelete=!0},changeModalAdd:function(t){this.idWorktemplates=t.id,this.nameWorktemplates=t.name,this.priceWorktemplates=t.pricePerOne,this.btnChange=!0,this.modalAdd=!0}},validations:{nameWorktemplates:{required:b["required"]},priceWorktemplates:{required:b["required"]}}},Ue=qe,je=(e("e943"),Object(c["a"])(Ue,Ye,Be,!1,null,"45d891f3",null)),ze=je.exports,We=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Прием")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BRReceptionFinishedProduct"}}},[t._v(t._s(t.$t("Готовый продук")))])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BRReceptionProduct"}}},[t._v(t._s(t.$t("Сырье")))])],1)])])])},Le=[],Fe={name:"WRProduct",data:function(){return{}},methods:{}},Ee=Fe,He=(e("7a68"),Object(c["a"])(Ee,We,Le,!1,null,"503afa4a",null)),Je=He.exports,Ke=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Отправка")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BRSendingFinishedProduct"}}},[t._v(t._s(t.$t("Готовый продук")))])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"BRSendingProduct"}}},[t._v(t._s(t.$t("Сырье")))])],1)])])])},Qe=[],Xe={name:"WRProduct",data:function(){return{}},methods:{}},Ze=Xe,ts=(e("6894"),Object(c["a"])(Ze,Ke,Qe,!1,null,"6e0524e0",null)),as=ts.exports,es=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"BRSendingProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRSending"}}},[e("i",{staticClass:"bx bx-upload"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Сырье")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoSend,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sentToBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.deleteItemClaim()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.addColor()}}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorCode,expression:"colorCode"}],staticClass:"input",class:t.$v.colorCode.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorCode},on:{input:function(a){a.target.composing||(t.colorCode=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorCode")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorName,expression:"colorName"}],staticClass:"input",class:t.$v.colorName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorName},on:{input:function(a){a.target.composing||(t.colorName=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorName")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editColor()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeInfoModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.itemTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" "+t._s(a.unit))])])}))],2)])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete||t.modalInfo,expression:"modalAdd || modalDelete || modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},ss=[],ns={name:"BRSendingProduct",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,modalInfo:!1,infoModal:[],claimId:"",colorCode:"",colorName:"",info:[],infoSend:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.listSendItems()},methods:{listSendItems:function(){var t=this;this.loading=!0,this.infoSend=[],f.a.get("".concat(this.api,"/listSendItems/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoSend=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},deleteItemClaim:function(){var t=this;this.loading=!0,f.a.get("".concat(this.api,"/deleteItemClaim/?claimId=").concat(this.claimId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.listSendItems()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalAdd:function(){this.$router.push({name:"BRSendingAddProduct"})},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.colorCode="",this.colorName="",this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.claimId=t.id,this.colorCode=t.code,this.colorName=t.name},openModalDel:function(t){this.claimId=t,this.modalDelete=!0},openModalInfo:function(t){this.modalInfo=!0,this.infoModal=t},closeInfoModal:function(){this.modalInfo=!1,this.infoModal=[]}},validations:{colorCode:{required:b["required"]},colorName:{required:b["required"]}}},is=ns,os=(e("c9a6"),Object(c["a"])(is,es,ss,!1,null,"0975228b",null)),ls=os.exports,cs=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"BRSendingAddProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("div",{staticClass:"breadcrumb__item"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRSendingProduct"}}},[e("i",{staticClass:"fa fa-angle-left"}),e("p",[t._v(t._s(t.$t("back")))])])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12 mb-3"},[e("div",{staticClass:"filter-card"},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{"deselect-label":"Невозможно удалить","allow-empty":!1,label:"name","track-by":"id",options:t.branchOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}}),e("span",[t._v("Филиал")])],1)])])]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("count")))]),e("p",{staticClass:"w-3"})]),e("div",{staticClass:"table-custom__body"},[t._l(t.sendInfo,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.itemTemplateName))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.count)+" "+t._s(a.unit))]),e("div",{staticClass:"w-3 btns"},[e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.delMetter(a.itemTemplate)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0!=t.sendInfo.length?e("div",{staticClass:"btn btn-success w-100 mt-3 p-2",on:{click:function(a){return t.createItemClaim()}}},[t._v(t._s(t.$t("Отправить")))]):t._e()],2)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"Name","track-by":"Id",options:t.metterGroupOption,multiple:!1,taggable:!1,searchable:!1,"allow-empty":!1},model:{value:t.metterGroupValue,callback:function(a){t.metterGroupValue=a},expression:"metterGroupValue"}}),e("span",[t._v(t._s(t.$t("groupMatter")))])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"NameCode","track-by":"Id",options:t.metterOption,multiple:!1,taggable:!1,searchable:!1,"allow-empty":!1},model:{value:t.metterValue,callback:function(a){t.metterValue=a},expression:"metterValue"}}),e("span",[t._v(t._s(t.$t("matter")))])],1),e("p",{staticClass:"form__title"},[t._v(t._s(t.$t("Цвет"))+": "+t._s(this.metterValue.ColorCode)+" "+t._s(this.metterValue.Color))]),e("p",{staticClass:"form__title"},[t._v(t._s(t.$t("Общий количесто"))+": "+t._s(this.countMetter)+" "+t._s(this.metterValue.Unit))]),e("div",{staticClass:"name count"},[e("button",{staticClass:"btn btn-left bg-danger",attrs:{disabled:t.btnMinusDisabled},on:{click:function(a){return a.preventDefault(),t.minus()}}},[e("i",{staticClass:"bx bx-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.count,expression:"count",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.count},on:{input:function(a){a.target.composing||(t.count=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-right bg-success",attrs:{disabled:t.btnPlusDisabled},on:{click:function(a){return a.preventDefault(),t.plus()}}},[e("i",{staticClass:"bx bx-plus"})])]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addMetter()}}},[t._v(t._s(t.$t("add")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},rs=[],ds={name:"BRSendingAddProduct",data:function(){return{loading:!1,modalAdd:!1,castelmetterValue:!1,btnMinusDisabled:!0,btnPlusDisabled:!1,branchValue:[],branchOption:[],metterGroupValue:"",metterGroupOption:[],metterValue:"",metterOption:[],metter:[],countMetter:0,countUnit:"",count:0,info:[],sendInfo:[],ItemClaim:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=JSON.parse(sessionStorage.getItem("auth")),this.getBranches(),this.itemsbybranch(),this.closeModalAdd()},methods:{getBranches:function(){var t=this;this.loading=!0,this.branchOption=[],f.a.get("".concat(this.api,"/branches"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.branchOption=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},itemsbybranch:function(){var t=this;this.loading=!0,this.infoItemsbybranch=[],f.a.get("".concat(this.api,"/itemsbybranch/?branchId=").concat(this.auth.branchId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.metter=a.data;for(var e=0;e<a.data.length;e++)t.metterGroupOption.push({Id:e+1,Name:a.data[e].name})})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addMetter:function(){var t=this;if(this.$v.$touch(),this.$v.metterGroupValue.$invalid||this.$v.metterValue.$invalid||this.$v.count.$invalid)this.$toast.open({message:"Ввидите данные правильно",type:"error"});else{var a=this.sendInfo.find((function(a){if(a.itemTemplateName==t.metterValue.Name)return a}));void 0==a||null==a?this.sendInfo.push({itemTemplateName:this.metterValue.Name,itemTemplate:this.metterValue.Id,count:+this.count,unit:this.countUnit}):this.sendInfo.find((function(a){a.itemTemplateName==t.metterValue.Name&&(a.count+=+t.count)})),this.metter.find((function(a){a.name==t.metterGroupValue.Name&&a.items.find((function(a){a.Name==t.metterValue.Name&&(a.Count=t.countMetter)}))})),this.closeModalAdd()}},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.metterGroupValue="",this.metterValue="",this.count=0,this.countMetter=0,this.countUnit="",this.$v.$reset()},delMetter:function(t){this.sendInfo=this.sendInfo.filter((function(a){return a.itemTemplate!=t}))},createItemClaim:function(){var t=this;if(this.$v.$touch(),this.$v.branchValue.$invalid&&0!=this.sendInfo.length)this.$toast.open({message:"Ввидите данные правильно",type:"error"});else{this.loading=!0;var a={sendToBranchId:this.branchValue.id,sentToBranchName:this.branchValue.name,items:this.ItemClaim};f.a.post("".concat(this.api,"/createItemClaim/"),a,{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Отправленно"),setTimeout((function(){t.$router.push({name:"BRSendingProduct"})}),1e3)):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))}},minus:function(){this.count=this.count-1,this.countMetter=this.countMetter+1},plus:function(){this.count=this.count+1,this.countMetter=this.countMetter-1}},watch:{metterGroupValue:function(){var t=this;if(this.metterOption=[],""!=this.metterGroupValue&&null!=this.metterGroupValue){for(var a=this.metter.find((function(a){if(a.name==t.metterGroupValue.Name)return a})),e=0;e<a.items.length;e++)this.metterOption.push({Code:a.items[e].Code,Color:a.items[e].Color,ColorCode:a.items[e].ColorCode,Count:a.items[e].Count,Id:a.items[e].Id,Name:a.items[e].Name,Unit:a.items[e].Unit,NameCode:a.items[e].Code+" "+a.items[e].Name});0==this.castelmetterValue?this.metterValue="":this.castelmetterValue=!1}},metterValue:function(){""!=this.metterValue?(this.countMetter=this.metterValue.Count,this.countUnit=this.metterValue.Unit):(this.countMetter=0,this.countUnit="")},count:function(){0==this.count?this.btnMinusDisabled=!0:this.btnMinusDisabled=!1,this.countMetter=this.metterValue.Count-+this.count,this.count=Math.min(this.metterValue.Count,parseInt(this.count))},countMetter:function(){0==this.countMetter?this.btnPlusDisabled=!0:this.btnPlusDisabled=!1},sendInfo:function(){this.ItemClaim=[];for(var t=0;t<this.sendInfo.length;t++)this.ItemClaim.push({itemTemplate:this.sendInfo[t].itemTemplate,count:this.sendInfo[t].count})}},validations:{branchValue:{required:b["required"]},metterGroupValue:{required:b["required"]},metterValue:{required:b["required"]},count:{required:b["required"]}}},us=ds,ms=(e("3161"),Object(c["a"])(us,cs,rs,!1,null,"1ea14238",null)),ps=ms.exports,hs=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"BRSendingFinishedProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRSending"}}},[e("i",{staticClass:"bx bx-upload"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("finishedProduct")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoSend,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sentToBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeInfoModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.productTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" dona")])])}))],2)])]):t._e(),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.deleteProductClaim()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalInfo||t.modalDelete,expression:"modalInfo || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},fs=[],bs={name:"BRSendingFinishedProduct",data:function(){return{loading:!1,modalInfo:!1,modalDelete:!1,infoModal:[],infoSend:[],claimId:"",token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.listSendProducts()},methods:{listSendProducts:function(){var t=this;this.loading=!0,this.infoSend=[],f.a.get("".concat(this.api,"/listSendProducts/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoSend=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},deleteProductClaim:function(){var t=this;this.loading=!0,f.a.get("".concat(this.api,"/deleteProductClaim/?claimId=").concat(this.claimId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.closeInfoModal(),t.listSendProducts()):t.$toast.error(a.data.msg)})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},openModalAdd:function(){this.$router.push({name:"BRSendingAddFinishedProduct"})},openModalInfo:function(t){this.modalInfo=!0,this.infoModal=t},closeInfoModal:function(){this.modalInfo=!1,this.modalDelete=!1,this.claimId=""},openModalDel:function(t){this.claimId=t,this.modalDelete=!0}}},vs=bs,_s=(e("723a"),Object(c["a"])(vs,hs,fs,!1,null,"6be76eb2",null)),Cs=_s.exports,gs=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"BRSendingAddFinishedProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("div",{staticClass:"breadcrumb__item"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRSendingFinishedProduct"}}},[e("i",{staticClass:"fa fa-angle-left"}),e("p",[t._v(t._s(t.$t("back")))])])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12 mb-3"},[e("div",{staticClass:"filter-card"},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{"deselect-label":"Невозможно удалить","allow-empty":!1,label:"name","track-by":"id",options:t.branchOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}}),e("span",[t._v("Филиал")])],1)])])]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("count")))]),e("p",{staticClass:"w-3"})]),e("div",{staticClass:"table-custom__body"},[t._l(t.sendInfo,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.itemTemplateName))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.count)+" "+t._s(a.unit))]),e("div",{staticClass:"w-3 btns"},[e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.delMetter(a.itemTemplate)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0!=t.sendInfo.length?e("div",{staticClass:"btn btn-success w-100 mt-3 p-2",on:{click:function(a){return t.createItemClaim()}}},[t._v(t._s(t.$t("Отправить")))]):t._e()],2)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.modelGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"groupName","track-by":"groupId",options:t.modelGroupOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.modelGroupValue,callback:function(a){t.modelGroupValue=a},expression:"modelGroupValue"}}),e("span",[t._v(t._s(t.$t("modelGroup")))])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.modelValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"NameCode","track-by":"Code",options:t.modelOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.modelValue,callback:function(a){t.modelValue=a},expression:"modelValue"}}),e("span",[t._v(t._s(t.$t("matter")))])],1),e("p",{staticClass:"form__title"},[e("span",[t._v("Цвет:")]),t._v(" "+t._s(t.modelValue.ColorCode)+" "+t._s(t.modelValue.Color))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Общий кол:")]),t._v(" "+t._s(t.countItem))]),e("div",{staticClass:"count-btn"},[e("button",{staticClass:"btn btn-left bg-danger",attrs:{disabled:t.btnMinusDisabled},on:{click:function(a){return a.preventDefault(),t.minus()}}},[e("i",{staticClass:"bx bx-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.count,expression:"count",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.count},on:{input:function(a){a.target.composing||(t.count=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-right bg-success",attrs:{disabled:t.btnPlusDisabled},on:{click:function(a){return a.preventDefault(),t.plus()}}},[e("i",{staticClass:"bx bx-plus"})])]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addModel()}}},[t._v(t._s(t.$t("add")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},$s=[],ks={name:"BRSendingAddFinishedProduct",data:function(){return{loading:!1,modalAdd:!1,castelmodelValue:!1,btnMinusDisabled:!0,btnPlusDisabled:!1,countItem:0,branchValue:[],branchOption:[],modelGroupValue:"",modelGroupOption:"",modelValue:"",modelOption:[],count:"",info:[],sendInfo:[],ItemClaim:[],token:"",auth:[],api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=JSON.parse(sessionStorage.getItem("auth")),this.getBranches(),this.productsbybranch()},methods:{getBranches:function(){var t=this;this.loading=!0,this.branchOption=[],f.a.get("".concat(this.api,"/branches"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.branchOption=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},productsbybranch:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/productsbybranch/?branchId=").concat(this.auth.branchId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.modelGroupOption=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.modelGroupValue="",this.modelValue="",this.count="",this.countItem="",this.$v.$reset()},addModel:function(){var t=this;if(this.$v.$touch(),this.$v.modelGroupValue.$invalid||this.$v.modelValue.$invalid||this.$v.count.$invalid)this.$toast.open({message:"Ввидите данные правильно",type:"error"});else{var a=this.sendInfo.find((function(a){if(a.itemTemplateName==t.modelValue.Name)return a}));void 0==a||null==a?this.sendInfo.push({itemTemplateName:this.modelValue.Name,itemTemplate:this.modelValue.productTemplateId,count:this.count}):this.sendInfo.find((function(a){a.itemTemplateName==t.modelValue.Name&&(a.count+=+t.count)})),this.modelGroupOption.find((function(a){a.name==t.modelGroupValue.Name&&a.items.find((function(a){a.Name==t.modelValue.Name&&(a.Count=t.countItem)}))})),this.closeModalAdd()}},delMetter:function(t){this.sendInfo=this.sendInfo.filter((function(a){return a.itemTemplate!=t}))},createItemClaim:function(){var t=this;if(this.$v.$touch(),this.$v.branchValue.$invalid&&0!=this.sendInfo.length)this.$toast.open({message:"Ввидите данные правильно",type:"error"});else{this.loading=!0;for(var a=this.ItemClaim,e=0;e<a.length;e++)delete a[e].unit,delete a[e].itemTemplateName;var s={sendToBranchId:this.branchValue.id,sentToBranchName:this.branchValue.name,items:this.ItemClaim};f.a.post("".concat(this.api,"/createProductClaim/"),s,{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Отправленно"),setTimeout((function(){t.$router.push({name:"BRSendingFinishedProduct"})}),2e3)):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))}},minus:function(){this.count=this.count-1,this.countItem=this.countItem+1},plus:function(){this.count=this.count+1,this.countItem=this.countItem-1}},watch:{modelGroupValue:function(){var t=this;if(this.modelOption=[],""!=this.modelGroupValue){for(var a=this.modelGroupOption.find((function(a){if(a.groupId==t.modelGroupValue.groupId)return a})),e=0;e<a.items.length;e++)this.modelOption.push({Code:a.items[e].Code,Color:a.items[e].Color,ColorCode:a.items[e].ColorCode,Count:a.items[e].Count,Name:a.items[e].Name,productTemplateId:a.items[e].productTemplateId,NameCode:a.items[e].Code+" "+a.items[e].Name});0==this.castelmodelValue?this.modelValue="":this.castelmodelValue=!1}},modelValue:function(){""!=this.modelValue?this.countItem=this.modelValue.Count:this.countItem=0},count:function(){0==this.count?this.btnMinusDisabled=!0:this.btnMinusDisabled=!1,this.countItem=this.modelValue.Count-this.count,this.count=Math.min(this.modelValue.Count,parseInt(this.count))},countItem:function(){0==this.countItem?this.btnPlusDisabled=!0:this.btnPlusDisabled=!1},sendInfo:function(){this.ItemClaim=[];for(var t=0;t<this.sendInfo.length;t++)this.ItemClaim.push({productTemplate:this.sendInfo[t].itemTemplate,count:this.sendInfo[t].count})}},validations:{branchValue:{required:b["required"]},modelGroupValue:{required:b["required"]},modelValue:{required:b["required"]},count:{required:b["required"]}}},ys=ks,ws=(e("dd1d"),Object(c["a"])(ys,gs,$s,!1,null,"552018ea",null)),As=ws.exports,Ms=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"BRReceptionProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRReception"}}},[e("i",{staticClass:"bx bx-window-open"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Сырье")))])])],1),e("div",{staticClass:"wrapper"},[0!=t.infoAcceptItems.length?e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoAcceptItems,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.openReceptionModal(a)}}},[e("i",{staticClass:"bx bxs-plus-square"})])])])})),0)])]):t._e()]),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeReceptionModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"modal-info__wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.itemTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" "+t._s(a.unit))])])}))],2),2!=t.infoModal.recvState?e("button",{staticClass:"btn btn-success w-100 mt-3",attrs:{type:"button"},on:{click:function(a){return t.acceptItemClaim(t.infoModal.id)}}},[t._v(t._s(t.$t("Принять")))]):t._e()])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalInfo,expression:"modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Is=[],xs={name:"BRReceptionProduct",data:function(){return{loading:!1,modalInfo:!1,infoAcceptItems:[],infoModal:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){var t=this;this.token=sessionStorage.getItem("token"),this.loading=!0,setInterval((function(){t.listAcceptItems()}),3e3)},methods:{listAcceptItems:function(){var t=this;this.infoAcceptProducts=[],f.a.get("".concat(this.api,"/listAcceptItems/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoAcceptItems=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},acceptItemClaim:function(t){var a=this;this.loading=!0,f.a.get("".concat(this.api,"/acceptItemClaim/?claimId=").concat(t),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(t){1==t.data.code?(a.$toast.success("Добавленно"),a.listAcceptItems()):a.$toast.error(t.data.msg)})).catch((function(t){401==t.response.status&&(a.$toast.error(t.response.data.detail),sessionStorage.setItem("token",""),a.$router.push({name:"Auth"}))})).finally((function(){a.closeReceptionModal(),a.loading=!1}))},openReceptionModal:function(t){this.modalInfo=!0,this.infoModal=t},closeReceptionModal:function(){this.modalInfo=!1,this.infoModal=[]}}},Ns=xs,Ds=(e("60cc"),Object(c["a"])(Ns,Ms,Is,!1,null,"64a14d7a",null)),Vs=Ds.exports,Ts=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRReceptionFinishedProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"BRReception"}}},[e("i",{staticClass:"bx bx-window-open"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("finishedProduct")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.openReceptionModal(a)}}},[e("i",{staticClass:"bx bxs-plus-square"})])])])})),0)])])]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delColor()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.addColor()}}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorCode,expression:"colorCode"}],staticClass:"input",class:t.$v.colorCode.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorCode},on:{input:function(a){a.target.composing||(t.colorCode=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorCode")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorName,expression:"colorName"}],staticClass:"input",class:t.$v.colorName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorName},on:{input:function(a){a.target.composing||(t.colorName=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorName")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editColor()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeReceptionModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"modal-info__wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.productTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" "+t._s(a.unit))])])}))],2),2!=t.infoModal.recvState?e("button",{staticClass:"btn btn-success w-100 mt-3",attrs:{type:"button"},on:{click:function(a){return t.acceptProductClaim(t.infoModal.id)}}},[t._v(t._s(t.$t("Принять")))]):t._e()])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete||t.modalInfo,expression:"modalAdd || modalDelete || modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Ss=[],Ps={name:"WRReceptionFinishedProduct",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,modalInfo:!1,infoModal:[],colorId:"",colorCode:"",colorName:"",info:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.listAcceptProducts()},methods:{listAcceptProducts:function(){var t=this;this.loading=!0,this.info=[],this.infoSend=[],f.a.get("".concat(this.api,"/listAcceptProducts/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},acceptProductClaim:function(t){var a=this;this.loading=!0,f.a.get("".concat(this.api,"/acceptProductClaim/?claimId=").concat(t),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(t){1==t.data.code?(a.$toast.success("Принето"),a.listAcceptProducts()):a.$toast.error(t.data.msg)})).catch((function(t){401==t.response.status&&(a.$toast.error(t.response.data.detail),sessionStorage.setItem("token",""),a.$router.push({name:"Auth"}))})).finally((function(){a.closeReceptionModal(),a.loading=!1}))},openReceptionModal:function(t){this.modalInfo=!0,this.infoModal=t},closeReceptionModal:function(){this.modalInfo=!1,this.infoModal=[]}},validations:{colorCode:{required:b["required"]},colorName:{required:b["required"]}}},Gs=Ps,Os=(e("fb35"),Object(c["a"])(Gs,Ts,Ss,!1,null,"2c449290",null)),Rs=Os.exports,Ys=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRDashboard"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Склад")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"WRRawMaterial"}}},[t._v(" "+t._s(t.$t("Сырье"))+" ")])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"WRFinishedProduct"}}},[t._v(" "+t._s(t.$t("finishedProduct"))+" ")])],1)])])])},Bs=[],qs={name:"WRDashboard",data:function(){return{}},methods:{}},Us=qs,js=(e("2223"),Object(c["a"])(Us,Ys,Bs,!1,null,"4cf5bff0",null)),zs=js.exports,Ws=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"WRRawMaterial"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bxs-cylinder"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("Сырье"))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.index,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.name)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.name)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.name?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.name?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.items.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Код")]),e("p",{staticClass:"w-3"},[t._v("Название")]),e("p",{staticClass:"w-4"},[t._v("Цвет")]),e("p",{staticClass:"w-5"},[t._v("Кол.")])]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.items,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.Code))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.Name))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.ColorCode)+" "+t._s(a.Color))]),e("p",{staticClass:"w-5"},[t._v(t._s(a.Count)+" "+t._s(a.Unit))])])}))],2)]):t._e()])],1)})),0)])]),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Ls=[],Fs={name:"WRRawMaterial",data:function(){return{loading:!1,collapseActive:"",info:[],token:"",auth:[],api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=JSON.parse(sessionStorage.getItem("auth")),this.itemsbybranch()},methods:{itemsbybranch:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/itemsbybranch/?branchId=").concat(this.auth.branchId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t}},watch:{metterGroupValue:function(){var t=this;if(this.metterOption=[],""!=this.metterGroupValue){var a=this.metter.find((function(a){if(a.id==t.metterGroupValue.id)return a}));this.metterOption=a.list,0==this.castelmetterValue?this.metterValue="":this.castelmetterValue=!1}},metterValue:function(){var t=this;""!=this.metterValue&&(this.unitValue=this.unitOption.find((function(a){if(a.id==t.metterValue.unit)return a})))}},validations:{metterGroupValue:{required:b["required"]},metterValue:{required:b["required"]},count:{required:b["required"]}}},Es=Fs,Hs=(e("a362"),Object(c["a"])(Es,Ws,Ls,!1,null,"7687093d",null)),Js=Hs.exports,Ks=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"WRFinishedProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bxs-cylinder"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s("finishedProduct"))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.index,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.groupId)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.groupName)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.groupId?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.groupId?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.items.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Код")]),e("p",{staticClass:"w-3"},[t._v("Название")]),e("p",{staticClass:"w-4"},[t._v("Цвет")]),e("p",{staticClass:"w-5"},[t._v("Кол.")])]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.items,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.Code))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.Name))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.ColorCode)+" "+t._s(a.Color))]),e("p",{staticClass:"w-5"},[t._v(t._s(a.Count)+" "+t._s(a.Unit))])])}))],2)]):t._e()])],1)})),0)])]),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Qs=[],Xs={name:"WRFinishedProduct",data:function(){return{loading:!1,collapseActive:"",info:[],token:"",auth:[],api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=JSON.parse(sessionStorage.getItem("auth")),this.productsbybranch()},methods:{productsbybranch:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/productsbybranch/?branchId=").concat(this.auth.branchId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t}},watch:{metterGroupValue:function(){var t=this;if(this.metterOption=[],""!=this.metterGroupValue){var a=this.metter.find((function(a){if(a.id==t.metterGroupValue.id)return a}));this.metterOption=a.list,0==this.castelmetterValue?this.metterValue="":this.castelmetterValue=!1}},metterValue:function(){var t=this;""!=this.metterValue&&(this.unitValue=this.unitOption.find((function(a){if(a.id==t.metterValue.unit)return a})))}},validations:{metterGroupValue:{required:b["required"]},metterValue:{required:b["required"]},count:{required:b["required"]}}},Zs=Xs,tn=(e("8cc9"),Object(c["a"])(Zs,Ks,Qs,!1,null,"4cf9d791",null)),an=tn.exports,en=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Прием")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"WRReceptionFinishedProduct"}}},[t._v(t._s(t.$t("Готовый продук")))])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"WRReceptionProduct"}}},[t._v(t._s(t.$t("Сырье")))])],1)])])])},sn=[],nn={name:"WRProduct",data:function(){return{}},methods:{}},on=nn,ln=(e("4fc8"),Object(c["a"])(on,en,sn,!1,null,"31b2a9ee",null)),cn=ln.exports,rn=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Отправка")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"WRSendingFinishedProduct"}}},[t._v(t._s(t.$t("Готовый продук")))])],1),e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12"},[e("router-link",{staticClass:"card-custom",attrs:{to:{name:"WRSendingProduct"}}},[t._v(t._s(t.$t("Сырье")))])],1)])])])},dn=[],un={name:"WRProduct",data:function(){return{}},methods:{}},mn=un,pn=(e("1f4a"),Object(c["a"])(mn,rn,dn,!1,null,"5543666c",null)),hn=pn.exports,fn=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"sendingProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRSending"}}},[e("i",{staticClass:"bx bx-upload"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Сырье")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoSend,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sentToBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.deleteItemClaim()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.addColor()}}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorCode,expression:"colorCode"}],staticClass:"input",class:t.$v.colorCode.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorCode},on:{input:function(a){a.target.composing||(t.colorCode=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorCode")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorName,expression:"colorName"}],staticClass:"input",class:t.$v.colorName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorName},on:{input:function(a){a.target.composing||(t.colorName=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorName")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editColor()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeInfoModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.itemTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" "+t._s(a.unit))])])}))],2)])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete||t.modalInfo,expression:"modalAdd || modalDelete || modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},bn=[],vn={name:"WRSendingProduct",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,modalInfo:!1,infoModal:[],claimId:"",colorCode:"",colorName:"",info:[],infoSend:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.listSendItems()},methods:{listSendItems:function(){var t=this;this.loading=!0,this.infoSend=[],f.a.get("".concat(this.api,"/listSendItems/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoSend=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},deleteItemClaim:function(){var t=this;this.loading=!0,f.a.get("".concat(this.api,"/deleteItemClaim/?claimId=").concat(this.claimId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.listSendItems()):t.$toast.error(a.data.msg)})).catch((function(a){console.log(a),401==a.response.status&&t.$toast.error(a.response.data.detail)})).finally((function(){t.closeModalAdd(),t.loading=!1}))},openModalAdd:function(){this.$router.push({name:"WRSendingAddProduct"})},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.colorCode="",this.colorName="",this.$v.$reset()},changeModalAdd:function(t){this.modalAdd=!0,this.btnChange=!0,this.claimId=t.id,this.colorCode=t.code,this.colorName=t.name},openModalDel:function(t){this.claimId=t,this.modalDelete=!0},openModalInfo:function(t){this.modalInfo=!0,this.infoModal=t},closeInfoModal:function(){this.modalInfo=!1,this.infoModal=[]}},validations:{colorCode:{required:b["required"]},colorName:{required:b["required"]}}},_n=vn,Cn=(e("47db"),Object(c["a"])(_n,fn,bn,!1,null,"430fc7f1",null)),gn=Cn.exports,$n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRSendingAddProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("div",{staticClass:"breadcrumb__item"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRSendingProduct"}}},[e("i",{staticClass:"fa fa-angle-left"}),e("p",[t._v(t._s(t.$t("back")))])])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12 mb-3"},[e("div",{staticClass:"filter-card"},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{"deselect-label":"Невозможно удалить","allow-empty":!1,label:"name","track-by":"id",options:t.branchOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}}),e("span",[t._v("Филиал")])],1)])])]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("count")))]),e("p",{staticClass:"w-3"})]),e("div",{staticClass:"table-custom__body"},[t._l(t.sendInfo,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.itemTemplateName))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.count)+" "+t._s(a.unit))]),e("div",{staticClass:"w-3 btns"},[e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.delMetter(a.itemTemplate)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0!=t.sendInfo.length?e("div",{staticClass:"btn btn-success w-100 mt-3 p-2",on:{click:function(a){return t.createItemClaim()}}},[t._v(t._s(t.$t("Отправить")))]):t._e()],2)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"Name","track-by":"Id",options:t.metterGroupOption,multiple:!1,taggable:!1,searchable:!1,"allow-empty":!1},model:{value:t.metterGroupValue,callback:function(a){t.metterGroupValue=a},expression:"metterGroupValue"}}),e("span",[t._v(t._s(t.$t("groupMatter")))])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.metterValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"NameCode","track-by":"Id",options:t.metterOption,multiple:!1,taggable:!1,searchable:!1,"allow-empty":!1},model:{value:t.metterValue,callback:function(a){t.metterValue=a},expression:"metterValue"}}),e("span",[t._v(t._s(t.$t("matter")))])],1),e("p",{staticClass:"form__title"},[t._v(t._s(t.$t("Цвет"))+": "+t._s(this.metterValue.ColorCode)+" "+t._s(this.metterValue.Color))]),e("p",{staticClass:"form__title"},[t._v(t._s(t.$t("Общий количесто"))+": "+t._s(this.countMetter)+" "+t._s(this.metterValue.Unit))]),e("div",{staticClass:"name count"},[e("button",{staticClass:"btn btn-left bg-danger",attrs:{disabled:t.btnMinusDisabled},on:{click:function(a){return a.preventDefault(),t.minus()}}},[e("i",{staticClass:"bx bx-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.count,expression:"count",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.count},on:{input:function(a){a.target.composing||(t.count=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-right bg-success",attrs:{disabled:t.btnPlusDisabled},on:{click:function(a){return a.preventDefault(),t.plus()}}},[e("i",{staticClass:"bx bx-plus"})])]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addMetter()}}},[t._v(t._s(t.$t("add")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},kn=[],yn={name:"WRSendingAddProduct",data:function(){return{loading:!1,modalAdd:!1,castelmetterValue:!1,btnMinusDisabled:!0,btnPlusDisabled:!1,branchValue:[],branchOption:[],metterGroupValue:"",metterGroupOption:[],metterValue:"",metterOption:[],metter:[],countMetter:0,countUnit:"",count:0,info:[],sendInfo:[],ItemClaim:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=JSON.parse(sessionStorage.getItem("auth")),this.getBranches(),this.itemsbybranch(),this.closeModalAdd()},methods:{getBranches:function(){var t=this;this.loading=!0,this.branchOption=[],f.a.get("".concat(this.api,"/branches"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.branchOption=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},itemsbybranch:function(){var t=this;this.loading=!0,this.infoItemsbybranch=[],f.a.get("".concat(this.api,"/itemsbybranch/?branchId=").concat(this.auth.branchId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.metter=a.data;for(var e=0;e<a.data.length;e++)t.metterGroupOption.push({Id:e+1,Name:a.data[e].name})})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},addMetter:function(){var t=this;if(this.$v.$touch(),this.$v.metterGroupValue.$invalid||this.$v.metterValue.$invalid||this.$v.count.$invalid)this.$toast.open({message:"Ввидите данные правильно",type:"error"});else{var a=this.sendInfo.find((function(a){if(a.itemTemplateName==t.metterValue.Name)return a}));void 0==a||null==a?this.sendInfo.push({itemTemplateName:this.metterValue.Name,itemTemplate:this.metterValue.Id,count:+this.count,unit:this.countUnit}):this.sendInfo.find((function(a){a.itemTemplateName==t.metterValue.Name&&(a.count+=+t.count)})),this.metter.find((function(a){a.name==t.metterGroupValue.Name&&a.items.find((function(a){a.Name==t.metterValue.Name&&(a.Count=t.countMetter)}))})),this.closeModalAdd()}},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.metterGroupValue="",this.metterValue="",this.count=0,this.countMetter=0,this.countUnit="",this.$v.$reset()},delMetter:function(t){this.sendInfo=this.sendInfo.filter((function(a){return a.itemTemplate!=t}))},createItemClaim:function(){var t=this;if(this.$v.$touch(),this.$v.branchValue.$invalid&&0!=this.sendInfo.length)this.$toast.open({message:"Ввидите данные правильно",type:"error"});else{this.loading=!0;var a={sendToBranchId:this.branchValue.id,sentToBranchName:this.branchValue.name,items:this.ItemClaim};f.a.post("".concat(this.api,"/createItemClaim/"),a,{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Отправленно"),setTimeout((function(){t.$router.push({name:"WRSendingProduct"})}),1e3)):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))}},minus:function(){this.count=this.count-1,this.countMetter=this.countMetter+1},plus:function(){this.count=this.count+1,this.countMetter=this.countMetter-1}},watch:{metterGroupValue:function(){var t=this;if(this.metterOption=[],""!=this.metterGroupValue&&null!=this.metterGroupValue){for(var a=this.metter.find((function(a){if(a.name==t.metterGroupValue.Name)return a})),e=0;e<a.items.length;e++)this.metterOption.push({Code:a.items[e].Code,Color:a.items[e].Color,ColorCode:a.items[e].ColorCode,Count:a.items[e].Count,Id:a.items[e].Id,Name:a.items[e].Name,Unit:a.items[e].Unit,NameCode:a.items[e].Code+" "+a.items[e].Name});0==this.castelmetterValue?this.metterValue="":this.castelmetterValue=!1}},metterValue:function(){""!=this.metterValue?(this.countMetter=this.metterValue.Count,this.countUnit=this.metterValue.Unit):(this.countMetter=0,this.countUnit="")},count:function(){0==this.count?this.btnMinusDisabled=!0:this.btnMinusDisabled=!1,this.countMetter=this.metterValue.Count-+this.count,this.count=Math.min(this.metterValue.Count,parseInt(this.count))},countMetter:function(){0==this.countMetter?this.btnPlusDisabled=!0:this.btnPlusDisabled=!1},sendInfo:function(){this.ItemClaim=[];for(var t=0;t<this.sendInfo.length;t++)this.ItemClaim.push({itemTemplate:this.sendInfo[t].itemTemplate,count:this.sendInfo[t].count})}},validations:{branchValue:{required:b["required"]},metterGroupValue:{required:b["required"]},metterValue:{required:b["required"]},count:{required:b["required"]}}},wn=yn,An=(e("6a4c"),Object(c["a"])(wn,$n,kn,!1,null,"5ca0d5ae",null)),Mn=An.exports,In=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRSendingFinishedProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRSending"}}},[e("i",{staticClass:"bx bx-upload"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("finishedProduct")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoSend,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sentToBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.openModalDel(a.id)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeInfoModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.productTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" dona")])])}))],2)])]):t._e(),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.deleteProductClaim()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalInfo||t.modalDelete,expression:"modalInfo || modalDelete"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},xn=[],Nn={name:"WRSendingFinishedProduct",data:function(){return{loading:!1,modalInfo:!1,modalDelete:!1,infoModal:[],infoSend:[],claimId:"",token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.loading=!0,this.listSendProducts()},methods:{listSendProducts:function(){var t=this;this.loading=!0,this.infoSend=[],f.a.get("".concat(this.api,"/listSendProducts/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoSend=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},deleteProductClaim:function(){var t=this;this.loading=!0,f.a.get("".concat(this.api,"/deleteProductClaim/?claimId=").concat(this.claimId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Удаленно"),t.closeInfoModal(),t.listSendProducts()):t.$toast.error(a.data.msg)})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},openModalAdd:function(){this.$router.push({name:"WRSendingAddFinishedProduct"})},openModalInfo:function(t){this.modalInfo=!0,this.infoModal=t},closeInfoModal:function(){this.modalInfo=!1,this.modalDelete=!1,this.claimId=""},openModalDel:function(t){this.claimId=t,this.modalDelete=!0}}},Dn=Nn,Vn=(e("5d93"),Object(c["a"])(Dn,In,xn,!1,null,"0801e816",null)),Tn=Vn.exports,Sn=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRSendingAddFinishedProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("div",{staticClass:"breadcrumb__item"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRSendingFinishedProduct"}}},[e("i",{staticClass:"fa fa-angle-left"}),e("p",[t._v(t._s(t.$t("back")))])])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-lg-4 col-md-4 col-sm-12 mb-3"},[e("div",{staticClass:"filter-card"},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.branchValue.$error?"is-invalid":"",attrs:{"deselect-label":"Невозможно удалить","allow-empty":!1,label:"name","track-by":"id",options:t.branchOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.branchValue,callback:function(a){t.branchValue=a},expression:"branchValue"}}),e("span",[t._v("Филиал")])],1)])])]),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("count")))]),e("p",{staticClass:"w-3"})]),e("div",{staticClass:"table-custom__body"},[t._l(t.sendInfo,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.itemTemplateName))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.count)+" "+t._s(a.unit))]),e("div",{staticClass:"w-3 btns"},[e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.delMetter(a.itemTemplate)}}},[e("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])])])})),0!=t.sendInfo.length?e("div",{staticClass:"btn btn-success w-100 mt-3 p-2",on:{click:function(a){return t.createItemClaim()}}},[t._v(t._s(t.$t("Отправить")))]):t._e()],2)])])]),e("div",{staticClass:"btn-add",on:{click:function(a){return t.openModalAdd()}}},[e("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})]),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.modelGroupValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"groupName","track-by":"groupId",options:t.modelGroupOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.modelGroupValue,callback:function(a){t.modelGroupValue=a},expression:"modelGroupValue"}}),e("span",[t._v(t._s(t.$t("modelGroup")))])],1),e("div",{staticClass:"selects"},[e("multiselect",{class:t.$v.modelValue.$error?"is-invalid":"",attrs:{placeholder:"",label:"NameCode","track-by":"Code",options:t.modelOption,multiple:!1,taggable:!1,searchable:!1},model:{value:t.modelValue,callback:function(a){t.modelValue=a},expression:"modelValue"}}),e("span",[t._v(t._s(t.$t("matter")))])],1),e("p",{staticClass:"form__title"},[e("span",[t._v("Цвет:")]),t._v(" "+t._s(t.modelValue.ColorCode)+" "+t._s(t.modelValue.Color))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Общий кол:")]),t._v(" "+t._s(t.countItem))]),e("div",{staticClass:"count-btn"},[e("button",{staticClass:"btn btn-left bg-danger",attrs:{disabled:t.btnMinusDisabled},on:{click:function(a){return a.preventDefault(),t.minus()}}},[e("i",{staticClass:"bx bx-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.count,expression:"count",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.count},on:{input:function(a){a.target.composing||(t.count=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-right bg-success",attrs:{disabled:t.btnPlusDisabled},on:{click:function(a){return a.preventDefault(),t.plus()}}},[e("i",{staticClass:"bx bx-plus"})])]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addModel()}}},[t._v(t._s(t.$t("add")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Pn=[],Gn={name:"WRSendingAddFinishedProduct",data:function(){return{loading:!1,modalAdd:!1,castelmodelValue:!1,btnMinusDisabled:!0,btnPlusDisabled:!1,countItem:0,branchValue:[],branchOption:[],modelGroupValue:"",modelGroupOption:"",modelValue:"",modelOption:[],count:"",info:[],sendInfo:[],ItemClaim:[],token:"",auth:[],api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=JSON.parse(sessionStorage.getItem("auth")),this.getBranches(),this.productsbybranch()},methods:{getBranches:function(){var t=this;this.loading=!0,this.branchOption=[],f.a.get("".concat(this.api,"/branches"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.branchOption=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},productsbybranch:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/productsbybranch/?branchId=").concat(this.auth.branchId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.modelGroupOption=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},openModalAdd:function(){this.modalAdd=!0},closeModalAdd:function(){this.modalAdd=!1,this.modalDelete=!1,this.btnChange=!1,this.modelGroupValue="",this.modelValue="",this.count="",this.countItem="",this.$v.$reset()},addModel:function(){var t=this;if(this.$v.$touch(),this.$v.modelGroupValue.$invalid||this.$v.modelValue.$invalid||this.$v.count.$invalid)this.$toast.open({message:"Ввидите данные правильно",type:"error"});else{var a=this.sendInfo.find((function(a){if(a.itemTemplateName==t.modelValue.Name)return a}));void 0==a||null==a?this.sendInfo.push({itemTemplateName:this.modelValue.Name,itemTemplate:this.modelValue.productTemplateId,count:this.count}):this.sendInfo.find((function(a){a.itemTemplateName==t.modelValue.Name&&(a.count+=+t.count)})),this.modelGroupOption.find((function(a){a.name==t.modelGroupValue.Name&&a.items.find((function(a){a.Name==t.modelValue.Name&&(a.Count=t.countItem)}))})),this.closeModalAdd()}},delMetter:function(t){this.sendInfo=this.sendInfo.filter((function(a){return a.itemTemplate!=t}))},createItemClaim:function(){var t=this;if(this.$v.$touch(),this.$v.branchValue.$invalid&&0!=this.sendInfo.length)this.$toast.open({message:"Ввидите данные правильно",type:"error"});else{this.loading=!0;for(var a=this.ItemClaim,e=0;e<a.length;e++)delete a[e].unit,delete a[e].itemTemplateName;var s={sendToBranchId:this.branchValue.id,sentToBranchName:this.branchValue.name,items:this.ItemClaim};f.a.post("".concat(this.api,"/createProductClaim/"),s,{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){1==a.data.code?(t.$toast.success("Отправленно"),setTimeout((function(){t.$router.push({name:"WRSendingFinishedProduct"})}),2e3)):t.$toast.error(a.data.msg)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd(),t.loading=!1}))}},minus:function(){this.count=this.count-1,this.countItem=this.countItem+1},plus:function(){this.count=this.count+1,this.countItem=this.countItem-1}},watch:{modelGroupValue:function(){var t=this;if(this.modelOption=[],""!=this.modelGroupValue){for(var a=this.modelGroupOption.find((function(a){if(a.groupId==t.modelGroupValue.groupId)return a})),e=0;e<a.items.length;e++)this.modelOption.push({Code:a.items[e].Code,Color:a.items[e].Color,ColorCode:a.items[e].ColorCode,Count:a.items[e].Count,Name:a.items[e].Name,productTemplateId:a.items[e].productTemplateId,NameCode:a.items[e].Code+" "+a.items[e].Name});0==this.castelmodelValue?this.modelValue="":this.castelmodelValue=!1}},modelValue:function(){""!=this.modelValue?this.countItem=this.modelValue.Count:this.countItem=0},count:function(){0==this.count?this.btnMinusDisabled=!0:this.btnMinusDisabled=!1,this.countItem=this.modelValue.Count-this.count,this.count=Math.min(this.modelValue.Count,parseInt(this.count))},countItem:function(){0==this.countItem?this.btnPlusDisabled=!0:this.btnPlusDisabled=!1},sendInfo:function(){this.ItemClaim=[];for(var t=0;t<this.sendInfo.length;t++)this.ItemClaim.push({productTemplate:this.sendInfo[t].itemTemplate,count:this.sendInfo[t].count})}},validations:{branchValue:{required:b["required"]},modelGroupValue:{required:b["required"]},modelValue:{required:b["required"]},count:{required:b["required"]}}},On=Gn,Rn=(e("57f7"),Object(c["a"])(On,Sn,Pn,!1,null,"4f6a693b",null)),Yn=Rn.exports,Bn=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"WRReceptionProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRReception"}}},[e("i",{staticClass:"bx bx-window-open"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Сырье")))])])],1),e("div",{staticClass:"wrapper"},[0!=t.infoAcceptItems.length?e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoAcceptItems,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.openReceptionModal(a)}}},[e("i",{staticClass:"bx bxs-plus-square"})])])])})),0)])]):t._e()]),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeReceptionModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"modal-info__wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.itemTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" "+t._s(a.unit))])])}))],2),2!=t.infoModal.recvState?e("button",{staticClass:"btn btn-success w-100 mt-3",attrs:{type:"button"},on:{click:function(a){return t.acceptItemClaim(t.infoModal.id)}}},[t._v(t._s(t.$t("Принять")))]):t._e()])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalInfo,expression:"modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},qn=[],Un={name:"WRReceptionProduct",data:function(){return{loading:!1,modalInfo:!1,infoAcceptItems:[],infoModal:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){var t=this;this.token=sessionStorage.getItem("token"),this.loading=!0,setInterval((function(){t.listAcceptItems()}),3e3)},methods:{listAcceptItems:function(){var t=this;this.infoAcceptProducts=[],f.a.get("".concat(this.api,"/listAcceptItems/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoAcceptItems=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},acceptItemClaim:function(t){var a=this;this.loading=!0,f.a.get("".concat(this.api,"/acceptItemClaim/?claimId=").concat(t),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(t){1==t.data.code?(a.$toast.success("Добавленно"),a.listAcceptItems()):a.$toast.error(t.data.msg)})).catch((function(t){401==t.response.status&&(a.$toast.error(t.response.data.detail),sessionStorage.setItem("token",""),a.$router.push({name:"Auth"}))})).finally((function(){a.closeReceptionModal(),a.loading=!1}))},openReceptionModal:function(t){this.modalInfo=!0,this.infoModal=t},closeReceptionModal:function(){this.modalInfo=!1,this.infoModal=[]}}},jn=Un,zn=(e("d469"),Object(c["a"])(jn,Bn,qn,!1,null,"4bbc3402",null)),Wn=zn.exports,Ln=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"WRReceptionFinishedProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRDashboard"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"WRReception"}}},[e("i",{staticClass:"bx bx-window-open"})])],1),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("finishedProduct")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.openReceptionModal(a)}}},[e("i",{staticClass:"bx bxs-plus-square"})])])])})),0)])])]),t.modalDelete?e("div",{staticClass:"modal-delete"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.delColor()}}},[e("p",[t._v(t._s(t.$t("textDelete")))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("yes")))]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.modalDelete=!t.modalDelete}}},[t._v(t._s(t.$t("not")))])])])]):t._e(),t.modalAdd?e("div",{staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),t.addColor()}}},[e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorCode,expression:"colorCode"}],staticClass:"input",class:t.$v.colorCode.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorCode},on:{input:function(a){a.target.composing||(t.colorCode=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorCode")))])]),e("div",{staticClass:"name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.colorName,expression:"colorName"}],staticClass:"input",class:t.$v.colorName.$error?"is-invalid":"",attrs:{type:"text"},domProps:{value:t.colorName},on:{input:function(a){a.target.composing||(t.colorName=a.target.value)}}}),e("span",[t._v(t._s(t.$t("colorName")))])]),e("div",{staticClass:"btns"},[1!=t.btnChange?e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("add")))]):1==t.btnChange?e("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.editColor()}}},[t._v(t._s(t.$t("change")))]):t._e(),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v(t._s(t.$t("cancel")))])])])]):t._e(),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeReceptionModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"modal-info__wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.productTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" "+t._s(a.unit))])])}))],2),2!=t.infoModal.recvState?e("button",{staticClass:"btn btn-success w-100 mt-3",attrs:{type:"button"},on:{click:function(a){return t.acceptProductClaim(t.infoModal.id)}}},[t._v(t._s(t.$t("Принять")))]):t._e()])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd||t.modalDelete||t.modalInfo,expression:"modalAdd || modalDelete || modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Fn=[],En={name:"WRReceptionFinishedProduct",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,modalInfo:!1,infoModal:[],colorId:"",colorCode:"",colorName:"",info:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.listAcceptProducts()},methods:{listAcceptProducts:function(){var t=this;this.loading=!0,this.info=[],this.infoSend=[],f.a.get("".concat(this.api,"/listAcceptProducts/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},acceptProductClaim:function(t){var a=this;this.loading=!0,f.a.get("".concat(this.api,"/acceptProductClaim/?claimId=").concat(t),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(t){1==t.data.code?(a.$toast.success("Принето"),a.listAcceptProducts()):a.$toast.error(t.data.msg)})).catch((function(t){401==t.response.status&&(a.$toast.error(t.response.data.detail),sessionStorage.setItem("token",""),a.$router.push({name:"Auth"}))})).finally((function(){a.closeReceptionModal(),a.loading=!1}))},openReceptionModal:function(t){this.modalInfo=!0,this.infoModal=t},closeReceptionModal:function(){this.modalInfo=!1,this.infoModal=[]}},validations:{colorCode:{required:b["required"]},colorName:{required:b["required"]}}},Hn=En,Jn=(e("89eb"),Object(c["a"])(Hn,Ln,Fn,!1,null,"eaf8a5ac",null)),Kn=Jn.exports,Qn=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"SCDashborad"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"SCDashborad"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("store")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card"},[e("ul",{staticClass:"clps-menu"},t._l(t.info,(function(a){return e("li",{key:a.groupId,staticClass:"clps-menu__item clps"},[e("div",{staticClass:"clps__button",on:{click:function(e){return t.collapseToggle(a.groupId)}}},[e("p",{staticClass:"d-flex align-items-center"},[t._v(t._s(a.groupName)+" "),e("i",{staticClass:"ml-1 bx ",class:[t.collapseActive==a.groupId?"bxs-down-arrow":"bxs-right-arrow"]})])]),e("Transition",{attrs:{duration:"350",name:"nested"}},[t.collapseActive==a.groupId?e("div",{staticClass:"clps__list list"},[e("div",{staticClass:"custom-table"},[0!=a.items.length?e("div",{staticClass:"custom-table__header"},[e("p",{staticClass:"w-1"},[t._v("№")]),e("p",{staticClass:"w-2"},[t._v("Код")]),e("p",{staticClass:"w-3"},[t._v("Название")]),e("p",{staticClass:"w-4"},[t._v("Цвет")]),e("p",{staticClass:"w-5"},[t._v("Кол-во")]),e("p",{staticClass:"w-6"})]):e("div",{staticClass:"custom-table__header"},[e("p",[t._v("Пусто")])]),t._l(a.items,(function(a,s){return e("div",{key:a.Id,staticClass:"custom-table__body"},[e("p",{staticClass:"w-1"},[t._v(t._s(s+1))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.Code))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.Name))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.ColorCode)+" "+t._s(a.Color))]),e("p",{staticClass:"w-5"},[t._v(t._s(a.Count))]),e("div",{staticClass:"btns w-6"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.changeModalAdd(a)}}},[t._v("Открыть")])])])}))],2)]):t._e()])],1)})),0)])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-add"},[e("form",{staticClass:"form",attrs:{action:""}},[e("p",{staticClass:"form__title"},[e("span",[t._v("Филиал:")]),t._v(" "+t._s(t.auth.branchName))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Название:")]),t._v(" "+t._s(t.infoChange.Code)+" "+t._s(t.infoChange.Name))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Цвет:")]),t._v(" "+t._s(t.infoChange.ColorCode)+" "+t._s(t.infoChange.Color))]),e("p",{staticClass:"form__title"},[e("span",[t._v("Общий кол-во:")]),t._v(" "+t._s(t.count))]),e("div",{staticClass:"count-btn"},[e("button",{staticClass:"btn btn-left bg-danger",attrs:{disabled:t.btnMinusIsDisabled},on:{click:function(a){return a.preventDefault(),t.minus()}}},[e("i",{staticClass:"bx bx-minus"})]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.countItem,expression:"countItem",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.countItem},on:{input:function(a){a.target.composing||(t.countItem=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("button",{staticClass:"btn btn-right bg-success",attrs:{disabled:t.btnPlusIsDisabled},on:{click:function(a){return a.preventDefault(),t.plus()}}},[e("i",{staticClass:"bx bx-plus"})])]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn btn-warning",attrs:{type:"button",disabled:t.btnSubmitIsDisabled},on:{click:function(a){return a.preventDefault(),t.productSell()}}},[t._v("Изменить")]),e("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.closeModalAdd()}}},[t._v("Отмена")])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalAdd,expression:"modalAdd"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},Xn=[],Zn={name:"SCDashborad",data:function(){return{loading:!1,modalAdd:!1,btnMinusIsDisabled:!0,btnPlusIsDisabled:!1,btnSubmitIsDisabled:!0,collapseActive:0,info:[],infoChange:[],count:"",countItem:0,auth:"",api:"",token:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=JSON.parse(sessionStorage.getItem("auth")),this.loading=!0,this.getProductGroups()},methods:{getProductGroups:function(){var t=this;this.info=[],f.a.get("".concat(this.api,"/productsbybranch/?branchId=").concat(this.auth.branchId),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}))},productSell:function(){var t=this;this.loading=!0,this.info=[],f.a.get("".concat(this.api,"/productSell/?productTemplate=").concat(this.infoChange.productTemplateId,"&count=").concat(this.countItem),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){console.log(a.data),1==a.data.code?(t.$toast.success("Изменено"),t.getProductGroups()):(t.$toast.error(a.data.msg),t.loading=!1)})).catch((function(t){return console.log(t)})).finally((function(){t.closeModalAdd()}))},closeModalAdd:function(){this.modalAdd=!1,this.modalDeleteGroup=!1,this.modalDelete=!1,this.btnChange=!1,this.text=!0,this.count="",this.countItem=0,this.btnMinusIsDisabled=!0,this.btnPlusIsDisabled=!1,this.btnSubmitIsDisabled=!0,this.$v.$reset()},changeModalAdd:function(t){this.infoChange=t,this.modalAdd=!0,this.count=t.Count},collapseToggle:function(t){this.collapseActive==t?this.collapseActive=0:this.collapseActive=t},minus:function(){this.count=this.count+1,this.countItem=this.countItem-1},plus:function(){this.count=this.count-1,this.countItem=this.countItem+1}},watch:{countItem:function(){this.countItem<=0?(this.btnMinusIsDisabled=!0,this.btnSubmitIsDisabled=!0):(this.btnMinusIsDisabled=!1,this.btnSubmitIsDisabled=!1),this.countItem>this.infoChange.Count&&(this.countItem=this.infoChange.Count),this.count=this.infoChange.Count-this.countItem}},count:function(){0==this.count?this.btnPlusIsDisabled=!0:this.btnPlusIsDisabled=!1},validations:{productGroupName:{required:b["required"]}}},ti=Zn,ai=(e("6452"),Object(c["a"])(ti,Qn,Xn,!1,null,"aaadb124",null)),ei=ai.exports,si=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"SCHistory"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"SCDashborad"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("history")))])])],1),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("name")))]),e("p",{staticClass:"w-4"},[t._v(t._s(t.$t("count")))])]),e("div",{staticClass:"table-custom__body"},t._l(t.info,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(t._f("moment")(a.datetime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-2"},[t._v(t._s(a.userName))]),e("p",{staticClass:"w-3"},[t._v(t._s(a.productName))]),e("p",{staticClass:"w-4"},[t._v(t._s(a.count))])])})),0)])])]),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},ni=[],ii={name:"SCHistory",data:function(){return{loading:!1,modalDelete:!1,btnChange:!1,modalAdd:!1,modalInfo:!1,infoModal:[],colorId:"",colorCode:"",colorName:"",info:[],token:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.listSoldProducts()},methods:{listSoldProducts:function(){var t=this;this.loading=!0,this.info=[],this.infoSend=[],f.a.get("".concat(this.api,"/listSoldProducts/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.info=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))}}},oi=ii,li=(e("d6d7"),Object(c["a"])(oi,si,ni,!1,null,"478390f2",null)),ci=li.exports,ri=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"BRReceptionProduct"},[e("div",{staticClass:"breadcrumb p-0"},[e("router-link",{staticClass:"breadcrumb__link",attrs:{to:{name:"SCDashborad"}}},[e("i",{staticClass:"bx bx-home-alt"})]),e("div",{staticClass:"breadcrumb__item"},[e("i",{staticClass:"fa fa-angle-right"}),e("p",[t._v(t._s(t.$t("Прием")))])])],1),e("div",{staticClass:"wrapper"},[0!=t.infoAcceptProducts.length?e("div",{staticClass:"card-custom"},[e("div",{staticClass:"table-custom"},[e("div",{staticClass:"table-custom__header"},[e("p",{staticClass:"w-1"},[t._v(t._s(t.$t("branchName")))]),e("p",{staticClass:"w-2"},[t._v(t._s(t.$t("date")))]),e("p",{staticClass:"w-3"},[t._v(t._s(t.$t("state")))]),e("p",{staticClass:"w-4"})]),e("div",{staticClass:"table-custom__body"},t._l(t.infoAcceptProducts,(function(a){return e("div",{key:a.id,staticClass:"table-custom__body-item"},[e("p",{staticClass:"w-1"},[t._v(t._s(a.sendBranchName))]),e("p",{staticClass:"w-2"},[t._v(t._s(t._f("moment")(a.sendDateTime,"DD/MM/YYYY - HH:mm")))]),e("p",{staticClass:"w-3"},[t._v(t._s(1==a.recvState?t.$t("Ожидание приемки"):2==a.recvState?t.$t("Принято"):t.$t("Отклонено")))]),e("div",{staticClass:"w-4 btns"},[1==a.recvState?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bxs-plus-square"})]):e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModalInfo(a)}}},[e("i",{staticClass:"bx bx-copy-alt"})])])])})),0)])]):t._e()]),t.modalInfo?e("div",{staticClass:"modal-info"},[e("div",{staticClass:"close-btn",on:{click:function(a){return t.closeInfoModal()}}},[e("i",{staticClass:"bx bxs-x-circle"})]),e("div",{staticClass:"modal-info__wrapper"},[e("p",[t._v("Время отправки: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.sendDateTime,"DD/MM/YYYY - HH:mm")))])]),e("p",[t._v("Откуда отправлено: "),e("span",[t._v(t._s(t.infoModal.sendBranchName))])]),e("p",[t._v("Куда отправили: "),e("span",[t._v(t._s(t.infoModal.sentToBranchName))])]),e("p",[t._v("Имя отправителя: "),e("span",[t._v(t._s(t.infoModal.sendUserName))])]),e("br"),e("p",[t._v("Состояния: "),e("span",[t._v(t._s(1==t.infoModal.recvState?t.$t("Ожидание приемки"):2==t.infoModal.recvState?t.$t("Принято"):t.$t("Отклонено")))])]),2==t.infoModal.recvState?e("p",[t._v("Время когда приняли: "),e("span",[t._v(t._s(t._f("moment")(t.infoModal.recvDateTime,"DD/MM/YYYY - HH:mm")))])]):t._e(),2==t.infoModal.recvState?e("p",[t._v("Имя принимателя: "),e("span",[t._v(t._s(t.infoModal.recvUserName))])]):t._e(),e("br"),e("div",{staticClass:"list"},[e("h1",[t._v("Список:")]),t._l(t.infoModal.items,(function(a){return e("div",{key:a.index,staticClass:"list__item"},[e("p",[t._v(t._s(a.productTemplateName)+":")]),e("p",[t._v(t._s(a.count)+" dona")])])}))],2),2!=t.infoModal.recvState?e("button",{staticClass:"btn btn-success w-100 mt-3",attrs:{type:"button"},on:{click:function(a){return t.acceptProductClaim(t.infoModal.id)}}},[t._v(t._s(t.$t("Принять")))]):t._e()])]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.modalInfo,expression:"modalInfo"}],staticClass:"modal-bg"}),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)},di=[],ui={name:"SCReceptionProduct",data:function(){return{loading:!1,modalInfo:!1,infoModal:[],infoAcceptProducts:[],infoAcceptItemClaim:[],token:"",auth:"",api:""}},components:{Loading:$},beforeMount:function(){this.api=window.MY_CONFIG_BUYURSIN.api},mounted:function(){this.token=sessionStorage.getItem("token"),this.auth=sessionStorage.getItem("auth"),this.loading=!0,this.listAcceptProducts()},methods:{listAcceptProducts:function(){var t=this;this.infoAcceptProducts=[],f.a.get("".concat(this.api,"/listAcceptProducts/"),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(a){t.infoAcceptProducts=a.data})).catch((function(a){401==a.response.status&&(t.$toast.error(a.response.data.detail),sessionStorage.setItem("token",""),t.$router.push({name:"Auth"}))})).finally((function(){t.loading=!1}))},acceptProductClaim:function(t){var a=this;f.a.get("".concat(this.api,"/acceptProductClaim/?claimId=").concat(t),{headers:{Authorization:"Token ".concat(this.token)}}).then((function(t){1==t.data.code?(a.$toast.success("Добавленно"),a.listAcceptProducts()):a.$toast.error(t.data.msg),a.closeReceptionModal()})).catch((function(t){401==t.response.status&&(a.$toast.error(t.response.data.detail),sessionStorage.setItem("token",""),a.$router.push({name:"Auth"}))})).finally((function(){a.loading=!1}))},openModalInfo:function(t){this.modalInfo=!0,this.infoModal=t},closeInfoModal:function(){this.modalInfo=!1,this.infoModal=[]}}},mi=ui,pi=(e("184a"),Object(c["a"])(mi,ri,di,!1,null,"4b7aa56c",null)),hi=pi.exports,fi=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h1",{},[t._v("404 Not Foud")])},bi=[],vi={},_i=Object(c["a"])(vi,fi,bi,!1,null,null,null),Ci=_i.exports;s["a"].use(u["a"]);var gi=[{path:"/",name:"Auth",component:A,meta:{layout:"AuthLayout"}},{path:"/dashboard",name:"Dashboard",component:V,meta:{layout:"Default"}},{path:"/models",name:"Models",component:R,meta:{layout:"Default"}},{path:"/models/:productName/:id",name:"ModelsItem",component:z,meta:{layout:"Default"}},{path:"/add",name:"Add",component:J,meta:{layout:"Default"}},{path:"/add/colors",name:"Colors",component:lt,meta:{layout:"Default"}},{path:"/add/units",name:"Units",component:pt,meta:{layout:"Default"}},{path:"/add/matters",name:"Matters",component:Ct,meta:{layout:"Default"}},{path:"/add/groups",name:"Groups",component:At,meta:{layout:"Default"}},{path:"/add/branches",name:"Branches",component:at,meta:{layout:"Default"}},{path:"/add/employes",name:"Employes",component:Vt,meta:{layout:"Default"}},{path:"/add/worktemplates",name:"Worktemplates",component:Rt,meta:{layout:"Default"}},{path:"/add/users",name:"Users",component:zt,meta:{layout:"Default"}},{path:"/store",name:"Store",component:Jt,meta:{layout:"Default"}},{path:"/store/raw-material",name:"RawMaterial",component:aa,meta:{layout:"Default"}},{path:"/store/finished-product",name:"FinishedProduct",component:la,meta:{layout:"Default"}},{path:"/product",name:"Product",component:pa,meta:{layout:"Default"}},{path:"/sending/finished-product",name:"SendingFinishedProduct",component:Ca,meta:{layout:"Default"}},{path:"/sending/product",name:"SendingProduct",component:Aa,meta:{layout:"Default"}},{path:"/sending/product/add",name:"SendingAddProduct",component:Va,meta:{layout:"Default"}},{path:"/reception/finished-product",name:"ReceptionFinishedProduct",component:Ra,meta:{layout:"Default"}},{path:"/reception/product",name:"ReceptionProduct",component:za,meta:{layout:"Default"}},{path:"/branch-dashboard",name:"BRDashboard",component:Ja,meta:{layout:"BranchLayout"}},{path:"/branch-dashboard/branch-raw-material",name:"BRRawMaterial",component:ae,meta:{layout:"BranchLayout"}},{path:"/branch-pay-list",name:"BRPayList",component:le,meta:{layout:"BranchLayout"}},{path:"/branch-pay-list/acceptance-finished-of-products",name:"BRAcceptanceFinishedProducts",component:pe,meta:{layout:"BranchLayout"}},{path:"/branch-pay-list/fine",name:"BRFine",component:Ce,meta:{layout:"BranchLayout"}},{path:"/branch-pay-list/pay",name:"BRPay",component:Ae,meta:{layout:"BranchLayout"}},{path:"/branch-add",name:"BRAdd",component:Ve,meta:{layout:"BranchLayout"}},{path:"/branch-add/employes",name:"BREmployes",component:Re,meta:{layout:"BranchLayout"}},{path:"/branch-add/worktemplates",name:"BRWorktemplates",component:ze,meta:{layout:"BranchLayout"}},{path:"/branch-sending",name:"BRSending",component:as,meta:{layout:"BranchLayout"}},{path:"/branch-sending/product",name:"BRSendingProduct",component:ls,meta:{layout:"BranchLayout"}},{path:"/branch-sending/product/add",name:"BRSendingAddProduct",component:ps,meta:{layout:"BranchLayout"}},{path:"/branch-sending/finished-product",name:"BRSendingFinishedProduct",component:Cs,meta:{layout:"BranchLayout"}},{path:"/branch-sending/finished-product/add",name:"BRSendingAddFinishedProduct",component:As,meta:{layout:"BranchLayout"}},{path:"/branch-reception",name:"BRReception",component:Je,meta:{layout:"BranchLayout"}},{path:"/branch-reception/product",name:"BRReceptionProduct",component:Vs,meta:{layout:"BranchLayout"}},{path:"/branch-reception/finished-product",name:"BRReceptionFinishedProduct",component:Rs,meta:{layout:"BranchLayout"}},{path:"/wr-dashboard",name:"WRDashboard",component:zs,meta:{layout:"WarehouseLayout"}},{path:"/wr-dashboard/wr-raw-material",name:"WRRawMaterial",component:Js,meta:{layout:"WarehouseLayout"}},{path:"/wr-dashboard/wr-finished-product",name:"WRFinishedProduct",component:an,meta:{layout:"WarehouseLayout"}},{path:"/wr-sending",name:"WRSending",component:hn,meta:{layout:"WarehouseLayout"}},{path:"/wr-sending/product",name:"WRSendingProduct",component:gn,meta:{layout:"WarehouseLayout"}},{path:"/wr-sending/product/add",name:"WRSendingAddProduct",component:Mn,meta:{layout:"WarehouseLayout"}},{path:"/wr-sending/finished-product",name:"WRSendingFinishedProduct",component:Tn,meta:{layout:"WarehouseLayout"}},{path:"/wr-sending/finished-product/add",name:"WRSendingAddFinishedProduct",component:Yn,meta:{layout:"WarehouseLayout"}},{path:"/wr-reception",name:"WRReception",component:cn,meta:{layout:"WarehouseLayout"}},{path:"/wr-reception/finished-product",name:"WRReceptionFinishedProduct",component:Kn,meta:{layout:"WarehouseLayout"}},{path:"/wr-reception/product",name:"WRReceptionProduct",component:Wn,meta:{layout:"WarehouseLayout"}},{path:"/sc-dashborad",name:"SCDashborad",component:ei,meta:{layout:"ScoreLayout"}},{path:"/sc-history",name:"SCHistory",component:ci,meta:{layout:"ScoreLayout"}},{path:"/sc-reception-product",name:"SCReceptionProduct",component:hi,meta:{layout:"ScoreLayout"}},{path:"*",name:"NotFound",component:Ci,meta:{layout:"AuthLayout"}}],$i=new u["a"]({routes:gi,base:"/buyursin-web/",mode:"history"}),ki=$i,yi=e("2f62");s["a"].use(yi["a"]);var wi=new yi["a"].Store({state:{},mutations:{},actions:{},getters:{}}),Ai=(e("678e"),e("1dce")),Mi=e.n(Ai),Ii=e("b079"),xi=e.n(Ii),Ni=e("a925");s["a"].use(Ni["a"]);var Di=new Ni["a"]({locale:["uz","ru"],fallbackLocale:localStorage.local,messages:{uz:{local:"uz",entrance:"Kirish",telephone:"Telefon nomer",password:"Parol",btnEntrance:"Tizimga kirish",textLogout:"Tizimdan chiqmoqchimisz ?",yes:"HA",not:"YOQ",dashboard:"Bosh sahifa",add:"Qoshish",model:"Model",color:"Rang",kod:"Kod",name:"Nomi",typeBranch:"Turi",btnExit:"CHIQISH",textDelete:"Haqiqatan ham oʻchirib tashlamoqchimisiz?",kodColor:"Rang kodi",kodColorName:"Rang nomi",branches:"Filial",shop:"Do'kon",store:"Omborhona",cancel:"Bekor qilish",change:"O'zgartirish",pay:"Oylik",matter:"Oylik"},ru:{local:"ru",entrance:"Вход",telephone:"Номер телефон",password:"Пароль",btnEntrance:"Вход в систему",textLogout:"Выйти ?",yes:"ДА",not:"НЕТ",dashboard:"Главная",add:"Добавить",model:"Модель",color:"Цвет",kod:"Код",name:"Название",typeBranch:"Тип",btnExit:"ВЫХОД",textDelete:"Вы уверенны что хотите удалить ?",kodColor:"Код цвета",kodColorName:"Название цвета",branches:"Филиал",shop:"Магазин",store:"Склад",cancel:"Отмена",change:"Изменить",pay:"Зар. плата.",matter:"Предмет",superUser:"Права админа"}},silentFallbackWarn:!0,silentTranslationWarn:!0}),Vi=(e("4238"),e("8e5f")),Ti=e.n(Vi),Si=e("2ead"),Pi=e.n(Si),Gi=e("7f45"),Oi=e.n(Gi);s["a"].use(Pi.a,{moment:Oi.a}),s["a"].component("multiselect",Ti.a),s["a"].config.productionTip=!1,s["a"].use(Mi.a),s["a"].use(xi.a,{duration:2e3,dismissible:!0,position:"top-right"}),new s["a"]({i18n:Di,router:ki,store:wi,render:function(t){return t(d)}}).$mount("#app")},"57f7":function(t,a,e){"use strict";e("6778")},"587f":function(t,a,e){},"5aef":function(t,a,e){},"5bc9":function(t,a,e){},"5c0b":function(t,a,e){"use strict";e("37c7")},"5d93":function(t,a,e){"use strict";e("5564")},"60cc":function(t,a,e){"use strict";e("d365")},6452:function(t,a,e){"use strict";e("5bc9")},6778:function(t,a,e){},6894:function(t,a,e){"use strict";e("371f")},"68ae":function(t,a,e){},"6a4c":function(t,a,e){"use strict";e("bdce")},"6f07":function(t,a,e){"use strict";e("116f")},"6f96":function(t,a,e){"use strict";e("7bd7")},"6fc2":function(t,a,e){},"723a":function(t,a,e){"use strict";e("13bd")},7786:function(t,a,e){"use strict";e("2c4d")},"77ce":function(t,a,e){"use strict";e("ccc0")},"77cf":function(t,a,e){},"7a68":function(t,a,e){"use strict";e("fd23")},"7bd7":function(t,a,e){},"87b3":function(t,a,e){"use strict";e("220a")},"89eb":function(t,a,e){"use strict";e("c297")},"8c76":function(t,a,e){},"8c8c":function(t,a,e){"use strict";e("f24c")},"8cc9":function(t,a,e){"use strict";e("c960")},"93e0":function(t,a,e){},9541:function(t,a,e){},"98c4":function(t,a,e){},"990c":function(t,a,e){},"9b5f":function(t,a,e){"use strict";e("5aef")},a2fc:function(t,a,e){"use strict";e("d4ce")},a362:function(t,a,e){"use strict";e("f8b4")},a449:function(t,a,e){var s={"./AuthLayout.vue":["25b3","chunk-2d0b2e8a"],"./BranchLayout.vue":["e48a","chunk-2c3de6d6"],"./Default.vue":["ea2a","chunk-df967538"],"./ScoreLayout.vue":["b52e","chunk-6c985723"],"./WarehouseLayout.vue":["85fe","chunk-45ef61ba"]};function n(t){if(!e.o(s,t))return Promise.resolve().then((function(){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=s[t],n=a[0];return e.e(a[1]).then((function(){return e(n)}))}n.keys=function(){return Object.keys(s)},n.id="a449",t.exports=n},a82c:function(t,a,e){"use strict";e("77cf")},aa2d:function(t,a,e){"use strict";e("cb81")},ab9a:function(t,a,e){},ad2c:function(t,a,e){},b1a2:function(t,a,e){},b23f:function(t,a,e){"use strict";e("4c0c")},b241:function(t,a,e){},b879:function(t,a,e){"use strict";e("e819")},b87f:function(t,a,e){},ba32:function(t,a,e){"use strict";e("6fc2")},bdce:function(t,a,e){},bdfd:function(t,a,e){},c297:function(t,a,e){},c7b6:function(t,a,e){},c960:function(t,a,e){},c9a6:function(t,a,e){"use strict";e("ff6c")},cb4d:function(t,a,e){"use strict";e("c7b6")},cb81:function(t,a,e){},ccc0:function(t,a,e){},d24f:function(t,a,e){"use strict";e("db3b")},d2e4:function(t,a,e){},d32d:function(t,a,e){},d365:function(t,a,e){},d3e6:function(t,a,e){},d469:function(t,a,e){"use strict";e("dd70")},d4ce:function(t,a,e){},d5eb:function(t,a,e){},d643:function(t,a,e){"use strict";e("bdfd")},d6d7:function(t,a,e){"use strict";e("5339")},d9ca:function(t,a,e){"use strict";e("98c4")},db3b:function(t,a,e){},dd1d:function(t,a,e){"use strict";e("0f8e")},dd70:function(t,a,e){},e077:function(t,a,e){"use strict";e("d2e4")},e1e7:function(t,a,e){"use strict";e("0ba0")},e4d2:function(t,a,e){"use strict";e("990c")},e59d:function(t,a,e){},e819:function(t,a,e){},e876:function(t,a,e){},e943:function(t,a,e){"use strict";e("ab9a")},f24c:function(t,a,e){},f382:function(t,a,e){},f4ab:function(t,a,e){"use strict";e("b241")},f80b:function(t,a,e){},f8b4:function(t,a,e){},fb35:function(t,a,e){"use strict";e("f382")},fd23:function(t,a,e){},ff6c:function(t,a,e){}});
//# sourceMappingURL=app.6c668359.js.map